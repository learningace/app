(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"I/3d":function(t,e,n){"use strict";n.d(e,"a",function(){return ud}),n.d(e,"b",function(){return ad});var r=n("fXoL"),i=n("D0XW"),o=n("HDdC"),s=n("Cfvw"),u=n("LRne"),a=n("JX91"),c=n("7o/Q");function h(){return t=>t.lift(new f)}class f{call(t,e){return e.subscribe(new l(t))}}class l extends c.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var p=n("lJxs"),d=n("Kqap");class v{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new y(t,this.compare,this.keySelector))}}class y extends c.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var g=n("pLZG"),b=n("pxpQ"),m=n("spgP"),w=n("ofXK"),I=n("Jgta"),E=n("zIRd"),_=n("q/0M"),O=n("qOnz"),T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function j(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var A,S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},N=N||{},x=S||self;function k(){}function D(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function C(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var P="closure_uid_"+(1e9*Math.random()>>>0),L=0;function R(t,e,n){return t.call.apply(t.bind,arguments)}function V(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function U(t,e,n){return(U=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?R:V).apply(null,arguments)}function M(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function q(){return Date.now()}function F(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function z(){this.j=this.j,this.i=this.i}z.prototype.j=!1,z.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,P)&&t[P]||(t[P]=++L)}(this)},z.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function H(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t){return/^[\s\xa0]*$/.test(t)}var J,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Y(t,e){return-1!=t.indexOf(e)}function Q(t,e){return t<e?-1:t>e?1:0}t:{var $=x.navigator;if($){var Z=$.userAgent;if(Z){J=Z;break t}}J=""}function tt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function et(t){var e={};for(var n in t)e[n]=t[n];return e}var nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<nt.length;o++)n=nt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}it[" "]=k;var ot,st,ut=Y(J,"Opera"),at=Y(J,"Trident")||Y(J,"MSIE"),ct=Y(J,"Edge"),ht=ct||at,ft=Y(J,"Gecko")&&!(Y(J.toLowerCase(),"webkit")&&!Y(J,"Edge"))&&!(Y(J,"Trident")||Y(J,"MSIE"))&&!Y(J,"Edge"),lt=Y(J.toLowerCase(),"webkit")&&!Y(J,"Edge");function pt(){var t=x.document;return t?t.documentMode:void 0}t:{var dt="",vt=(st=J,ft?/rv:([^\);]+)(\)|;)/.exec(st):ct?/Edge\/([\d\.]+)/.exec(st):at?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(st):lt?/WebKit\/(\S+)/.exec(st):ut?/(?:Version)[ \/]?(\S+)/.exec(st):void 0);if(vt&&(dt=vt?vt[1]:""),at){var yt=pt();if(null!=yt&&yt>parseFloat(dt)){ot=String(yt);break t}}ot=dt}var gt={};function bt(t){return function(t,e){var n=gt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=X(String(ot)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=Q(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Q(0==s[2].length,0==u[2].length)||Q(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e})}var mt=x.document&&at&&(pt()||parseInt(ot,10))||void 0,wt=!at||9<=Number(mt),It=at&&!bt("9"),Et=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{x.addEventListener("test",k,e),x.removeEventListener("test",k,e)}catch(n){}return t}();function _t(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ot(t,e){if(_t.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ft){t:{try{it(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Tt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}_t.prototype.b=function(){this.defaultPrevented=!0},F(Ot,_t);var Tt={2:"touch",3:"pen",4:"mouse"};Ot.prototype.b=function(){Ot.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,It)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var jt="closure_listenable_"+(1e6*Math.random()|0),At=0;function St(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++At,this.Y=this.Z=!1}function Nt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function xt(t){this.src=t,this.a={},this.b=0}function kt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=G(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Nt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}xt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Dt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new St(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ct="closure_lm_"+(1e6*Math.random()|0),Pt={};function Lt(t,e,n,r,i){if(r&&r.once)return Vt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Lt(t,e[o],n,r,i);return null}return n=Ht(n),t&&t[jt]?t.va(e,n,C(r)?!!r.capture:!!r,i):Rt(t,e,n,!1,r,i)}function Rt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=C(i)?!!i.capture:!!i;if(s&&!wt)return null;var u=Gt(t);if(u||(t[Ct]=u=new xt(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=zt,e=wt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Et||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Vt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vt(t,e[o],n,r,i);return null}return n=Ht(n),t&&t[jt]?t.wa(e,n,C(r)?!!r.capture:!!r,i):Rt(t,e,n,!0,r,i)}function Ut(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ut(t,e[o],n,r,i);else r=C(r)?!!r.capture:!!r,n=Ht(n),t&&t[jt]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Dt(o=t.a[e],n,r,i))&&(Nt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Gt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Dt(e,n,r,i)),(n=-1<t?e[t]:null)&&Mt(n))}function Mt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[jt])kt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gt(e))?(kt(n,t),0==n.b&&(n.src=null,e[Ct]=null)):Nt(t)}}}function qt(t){return t in Pt?Pt[t]:Pt[t]="on"+t}function Ft(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Mt(t),n.call(r,e)}function zt(t,e){if(t.Y)return!0;if(!wt){if(!e)t:{e=["window","event"];for(var n=x,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ft(t,e=new Ot(e,this))}return Ft(t,new Ot(e,this))}function Gt(t){return(t=t[Ct])instanceof xt?t:null}var Bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(t){return"function"==typeof t?t:(t[Bt]||(t[Bt]=function(e){return t.handleEvent(e)}),t[Bt])}function Kt(){z.call(this),this.c=new xt(this),this.J=this,this.C=null}function Wt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new _t(e,t);else if(e instanceof _t)e.target=e.target||t;else{var i=e;rt(e=new _t(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Jt(s,r,!0,e)&&i}if(i=Jt(s=e.a=t,r,!0,e)&&i,i=Jt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Jt(s=e.a=n[o],r,!1,e)&&i}function Jt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&kt(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}F(Kt,z),Kt.prototype[jt]=!0,(A=Kt.prototype).addEventListener=function(t,e,n,r){Lt(this,t,e,n,r)},A.removeEventListener=function(t,e,n,r){Ut(this,t,e,n,r)},A.G=function(){if(Kt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Nt(n[r]);delete e.a[t],e.b--}}this.C=null},A.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},A.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Xt=x.JSON.stringify;function Yt(){this.b=this.a=null}var Qt,$t=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new te},function(t){t.reset()});function Zt(){var t=ie,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function te(){this.next=this.b=this.a=null}function ee(t){x.setTimeout(function(){throw t},0)}function ne(t,e){Qt||function(){var t=x.Promise.resolve(void 0);Qt=function(){t.then(oe)}}(),re||(Qt(),re=!0),ie.add(t,e)}Yt.prototype.add=function(t,e){var n=$t.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},te.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},te.prototype.reset=function(){this.next=this.b=this.a=null};var re=!1,ie=new Yt;function oe(){for(var t;t=Zt();){try{t.a.call(t.b)}catch(n){ee(n)}var e=$t;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}re=!1}function se(t,e){Kt.call(this),this.b=t||1,this.a=e||x,this.f=U(this.Za,this),this.g=q()}function ue(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ae(t,e,n){if("function"==typeof t)n&&(t=U(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=U(t.handleEvent,t)}return 2147483647<Number(e)?-1:x.setTimeout(t,e||0)}function ce(t){t.a=ae(function(){t.a=null,t.c&&(t.c=!1,ce(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}F(se,Kt),(A=se.prototype).aa=!1,A.M=null,A.Za=function(){if(this.aa){var t=q()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wt(this,"tick"),this.aa&&(ue(this),this.start()))}},A.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},A.G=function(){se.X.G.call(this),ue(this),delete this.a};var he=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ce(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(x.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(z);function fe(t){z.call(this),this.b=t,this.a={}}F(fe,z);var le=[];function pe(t,e,n,r){Array.isArray(n)||(n&&(le[0]=n.toString()),n=le);for(var i=0;i<n.length;i++){var o=Lt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function de(t){tt(t.a,function(t,e){this.a.hasOwnProperty(e)&&Mt(t)},t),t.a={}}function ve(){this.a=!0}function ye(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Xt(n)}catch(u){return e}}(t,n)+(r?" "+r:"")})}fe.prototype.G=function(){fe.X.G.call(this),de(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ve.prototype.info=function(){};var ge={},be=null;function me(){return be=be||new Kt}function we(t){_t.call(this,ge.Fa,t)}function Ie(t){var e=me();Wt(e,new we(e,t))}function Ee(t,e){_t.call(this,ge.STAT_EVENT,t),this.stat=e}function _e(t){var e=me();Wt(e,new Ee(e,t))}function Oe(t){_t.call(this,ge.Ga,t)}function Te(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){t()},e)}ge.Fa="serverreachability",F(we,_t),ge.STAT_EVENT="statevent",F(Ee,_t),ge.Ga="timingevent",F(Oe,_t);var je={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ae={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Se(){}function Ne(){}Se.prototype.a=null;var xe,ke={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function De(){_t.call(this,"d")}function Ce(){_t.call(this,"c")}function Pe(){}function Le(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new fe(this),this.P=Re,this.R=new se(t=ht?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}F(De,_t),F(Ce,_t),F(Pe,Se),xe=new Pe;var Re=45e3,Ve={},Ue={};function Me(t,e,n){t.H=1,t.i=an(en(e)),t.j=n,t.I=!0,qe(t,null)}function qe(t,e){t.u=q(),Ge(t),t.l=en(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),In(n.b,"t",r),t.D=0,t.a=vr(t.g,t.g.C?e:null),0<t.O&&(t.F=new he(U(t.Ca,t,t.a),t.O)),pe(t.J,t.a,"readystatechange",t.Xa),e=t.B?et(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ie(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Fe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ze(t,n);if(i==Ue){4==e&&(t.h=4,_e(14),r=!1),ye(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ve){t.h=4,_e(15),ye(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ye(t.c,t.f,i,null),Je(t,i)}4==e&&0==n.length&&(t.h=1,_e(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ur(e),e.F=!0,_e(11))):(ye(t.c,t.f,n,"[Invalid Chunked Response]"),We(t),Ke(t))}function ze(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ue:(n=Number(e.substring(n,r)),isNaN(n)?Ve:(r+=1)+n>e.length?Ue:(e=e.substr(r,n),t.D=r+n,e))}function Ge(t){t.T=q()+t.P,Be(t,t.P)}function Be(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Te(U(t.Va,t),e)}function He(t){t.o&&(x.clearTimeout(t.o),t.o=null)}function Ke(t){0==t.g.v||t.A||hr(t.g,t)}function We(t){He(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ue(t.R),de(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Je(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Sn(n.b,t)))if(n.I=t.N,!t.C&&Sn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(ep){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;cr(n),$n(n)}sr(n),_e(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Te(U(n.Sa,n),6e3));if(1>=An(n.b)&&n.ea){try{n.ea()}catch(ep){}n.ea=void 0}}else lr(n,11)}else if((t.C||n.a==t)&&cr(n),!W(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(Y(h,"spdy")||Y(h,"quic")||Y(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Nn(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,un(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=q()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=dr(a,a.C?a.ga:null,a.fa),p.C){xn(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(He(d),Ge(d)),a.a=p}else or(a);0<n.g.length&&er(n)}else"stop"!=i[0]&&"close"!=i[0]||lr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?lr(n,7):Qn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ie(4)}catch(ep){}}function Xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(D(t)||"string"==typeof t)B(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(D(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(D(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ye(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ye)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Qe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];$e(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)$e(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function $e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(A=Le.prototype).setTimeout=function(t){this.P=t},A.Xa=function(t){t=t.target;var e=this.F;e&&3==Wn(t)?e.f():this.Ca(t)},A.Ca=function(t){try{if(t==this.a)t:{var e=Wn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ht&&!this.a.$())){this.A||4!=e||7==n||Ie(8==n||0>=r?3:2),He(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,_e(12),We(this),Ke(this);break t}ye(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Je(this,a)}this.I?(Fe(this,e,o),ht&&this.b&&3==e&&(pe(this.J,this.R,"tick",this.Wa),this.R.start())):(ye(this.c,this.f,o,null),Je(this,o)),4==e&&We(this),this.b&&!this.A&&(4==e?hr(this.g,this):(this.b=!1,Ge(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,_e(12)):(this.h=0,_e(13)),We(this),Ke(this)}}}catch(c){}},A.Wa=function(){if(this.a){var t=Wn(this.a),e=this.a.$();this.D<e.length&&(He(this),Fe(this,t,e),this.b&&4!=t&&Ge(this))}},A.cancel=function(){this.A=!0,We(this)},A.Va=function(){this.o=null;var t=q();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ie(3),_e(17)),We(this),this.h=2,Ke(this)):Be(this,this.T-t)},(A=Ye.prototype).K=function(){Qe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},A.L=function(){return Qe(this),this.a.concat()},A.get=function(t,e){return $e(this.b,t)?this.b[t]:e},A.set=function(t,e){$e(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},A.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof tn){this.a=void 0!==e?e:t.a,nn(this,t.f),this.j=t.j,rn(this,t.c),on(this,t.h),this.g=t.g,e=t.b;var n=new gn;n.c=e.c,e.a&&(n.a=new Ye(e.a),n.b=e.b),sn(this,n),this.i=t.i}else t&&(n=String(t).match(Ze))?(this.a=!!e,nn(this,n[1]||"",!0),this.j=cn(n[2]||""),rn(this,n[3]||"",!0),on(this,n[4]),this.g=cn(n[5]||"",!0),sn(this,n[6]||"",!0),this.i=cn(n[7]||"")):(this.a=!!e,this.b=new gn(null,this.a))}function en(t){return new tn(t)}function nn(t,e,n){t.f=n?cn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function rn(t,e,n){t.c=n?cn(e,!0):e}function on(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function sn(t,e,n){e instanceof gn?(t.b=e,function(t,e){e&&!t.f&&(bn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(mn(this,e),In(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=hn(e,vn)),t.b=new gn(e,t.a))}function un(t,e,n){t.b.set(e,n)}function an(t){return un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),t}function cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}tn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(hn(e,ln,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(hn(e,ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(hn(n,"/"==n.charAt(0)?dn:pn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",hn(n,yn)),t.join("")};var ln=/[#\/\?@]/g,pn=/[#\?:]/g,dn=/[#\?]/g,vn=/[#\?@]/g,yn=/#/g;function gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function bn(t){t.a||(t.a=new Ye,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function mn(t,e){bn(t),e=En(t,e),$e(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,$e((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Qe(t)))}function wn(t,e){return bn(t),e=En(t,e),$e(t.a.b,e)}function In(t,e,n){mn(t,e),0<n.length&&(t.c=null,t.a.set(En(t,e),K(n)),t.b+=n.length)}function En(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(A=gn.prototype).add=function(t,e){bn(this),this.c=null,t=En(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},A.forEach=function(t,e){bn(this),this.a.forEach(function(n,r){B(n,function(n){t.call(e,n,r,this)},this)},this)},A.L=function(){bn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},A.K=function(t){bn(this);var e=[];if("string"==typeof t)wn(this,t)&&(e=H(e,this.a.get(En(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},A.set=function(t,e){return bn(this),this.c=null,wn(this,t=En(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},A.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},A.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var _n=function(){return function(t,e){this.b=t,this.a=e}}();function On(t){this.g=t||Tn,t=x.PerformanceNavigationTiming?0<(t=x.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(x.ia&&x.ia.ya&&x.ia.ya()&&x.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Tn=10;function jn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function An(t){return t.b?1:t.a?t.a.size:0}function Sn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Nn(t,e){t.a?t.a.add(e):t.b=e}function xn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function kn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=j(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return K(t.c)}function Dn(){}function Cn(){this.a=new Dn}function Pn(t,e,n){var r=n||"";try{Xe(t,function(t,n){var i=t;C(t)&&(i=Xt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Gp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Gp}}function Ln(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}On.prototype.cancel=function(){var t,e;if(this.c=kn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=j(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Dn.prototype.stringify=function(t){return x.JSON.stringify(t,void 0)},Dn.prototype.parse=function(t){return x.JSON.parse(t,void 0)};var Rn=x.JSON.parse;function Vn(t){Kt.call(this),this.headers=new Ye,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Un,this.D=this.F=!1}F(Vn,Kt);var Un="",Mn=/^https?$/i,qn=["POST","PUT"];function Fn(t){return"content-type"==t.toLowerCase()}function zn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Gn(t),Hn(t)}function Gn(t){t.u||(t.u=!0,Wt(t,"complete"),Wt(t,"error"))}function Bn(t){if(t.b&&void 0!==N&&(!t.s[1]||4!=Wn(t)||2!=t.W()))if(t.l&&4==Wn(t))ae(t.za,0,t);else if(Wt(t,"readystatechange"),4==Wn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ze)[1]||null;if(!o&&x.self&&x.self.location){var s=x.self.location.protocol;o=s.substr(0,s.length-1)}i=!Mn.test(o?o.toLowerCase():"")}e=i}if(e)Wt(t,"complete"),Wt(t,"success");else{t.h=6;try{var u=2<Wn(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",Gn(t)}}finally{Hn(t)}}}function Hn(t,e){if(t.a){Kn(t);var n=t.a,r=t.s[0]?k:null;t.a=null,t.s=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch(Gp){}}}function Kn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(x.clearTimeout(t.m),t.m=null)}function Wn(t){return t.a?t.a.readyState:0}function Jn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return tt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):un(t,e,n))}function Xn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Yn(t){this.pa=0,this.g=[],this.c=new ve,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Xn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Xn("baseRetryDelayMs",5e3,t),this.Ra=Xn("retryDelaySeedMs",1e4,t),this.Ma=Xn("forwardChannelMaxRetries",2,t),this.ma=Xn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new On(t&&t.concurrentRequestLimit),this.ka=new Cn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Qn(t){if(Zn(t),3==t.v){var e=t.R++,n=en(t.B);un(n,"SID",t.J),un(n,"RID",e),un(n,"TYPE","terminate"),rr(t,n),(e=new Le(t,t.c,e,void 0)).H=2,e.i=an(en(n)),n=!1,x.navigator&&x.navigator.sendBeacon&&(n=x.navigator.sendBeacon(e.i.toString(),"")),!n&&x.Image&&((new Image).src=e.i,n=!0),n||(e.a=vr(e.g,null),e.a.ba(e.i)),e.u=q(),Ge(e)}pr(t)}function $n(t){t.a&&(ur(t),t.a.cancel(),t.a=null)}function Zn(t){$n(t),t.j&&(x.clearTimeout(t.j),t.j=null),cr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&x.clearTimeout(t.h),t.h=null)}function tr(t,e){t.g.push(new _n(t.Oa++,e)),3==t.v&&er(t)}function er(t){jn(t.b)||t.h||(t.h=!0,ne(t.Ba,t),t.u=0)}function nr(t,e){var n;n=e?e.f:t.R++;var r=en(t.B);un(r,"SID",t.J),un(r,"RID",n),un(r,"AID",t.P),rr(t,r),t.i&&t.l&&Jn(r,t.i,t.l),n=new Le(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ir(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Nn(t.b,n),Me(n,r,e)}function rr(t,e){t.f&&Xe({},function(t,n){un(e,n,t)})}function ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?U(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Pn(h,s,"req"+c+"_")}catch(Qr){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function or(t){t.a||t.j||(t.T=1,ne(t.Aa,t),t.o=0)}function sr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Te(U(t.Aa,t),fr(t,t.o)),t.o++,0))}function ur(t){null!=t.s&&(x.clearTimeout(t.s),t.s=null)}function ar(t){t.a=new Le(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=en(t.la);un(e,"RID","rpc"),un(e,"SID",t.J),un(e,"CI",t.H?"0":"1"),un(e,"AID",t.P),rr(t,e),un(e,"TYPE","xmlhttp"),t.i&&t.l&&Jn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=an(en(e)),n.j=null,n.I=!0,qe(n,t)}function cr(t){null!=t.m&&(x.clearTimeout(t.m),t.m=null)}function hr(t,e){var n=null;if(t.a==e){cr(t),ur(t),t.a=null;var r=2}else{if(!Sn(t.b,e))return;n=e.s,xn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=q()-e.u;var i=t.u;Wt(r=me(),new Oe(r,n,e,i)),er(t)}else or(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(An(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Te(U(t.Ba,t,e),fr(t,t.u)),t.u++,0)))}(t,e)||2==r&&sr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:lr(t,5);break;case 4:lr(t,10);break;case 3:lr(t,6);break;default:lr(t,2)}}function fr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function lr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=U(t.Ya,t);n||(n=new tn("//www.google.com/images/cleardot.gif"),x.location&&"http"==x.location.protocol||nn(n,"https"),an(n)),function(t,e){var n=new ve;if(x.Image){var r=new Image;r.onload=M(Ln,n,r,"TestLoadImage: loaded",!0,e),r.onerror=M(Ln,n,r,"TestLoadImage: error",!1,e),r.onabort=M(Ln,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=M(Ln,n,r,"TestLoadImage: timeout",!1,e),x.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else _e(2);t.v=0,t.f&&t.f.ra(e),pr(t),Zn(t)}function pr(t){t.v=0,t.I=-1,t.f&&(0==kn(t.b).length&&0==t.g.length||(t.b.c.length=0,K(t.g),t.g.length=0),t.f.qa())}function dr(t,e,n){var r=function(t){return t instanceof tn?en(t):new tn(t,void 0)}(n);if(""!=r.c)e&&rn(r,e+"."+r.c),on(r,r.h);else{var i=x.location;r=function(t,e,n,r){var i=new tn(null,void 0);return t&&nn(i,t),e&&rn(i,e),n&&on(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&tt(t.V,function(t,e){un(r,e,t)}),n=t.na,(e=t.A)&&n&&un(r,e,n),un(r,"VER",t.ha),rr(t,r),r}function vr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vn(t.Na)).F=t.C,e}function yr(){}function gr(){if(at&&!(10<=Number(mt)))throw Error("Environmental error: no available transport.")}function br(t,e){Kt.call(this),this.a=new Yn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!W(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ir(this)}function mr(t){De.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function wr(){Ce.call(this),this.status=1}function Ir(t){this.a=t}(A=Vn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:xe),this.a.onreadystatechange=U(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void zn(this,o)}t=n||"";var i=new Ye(this.headers);r&&Xe(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Fn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=x.FormData&&t instanceof x.FormData,!(0<=G(qn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Kn(this),0<this.o&&((this.D=function(t){return at&&bt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=U(this.xa,this)):this.m=ae(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){zn(this,o)}},A.xa=function(){void 0!==N&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wt(this,"timeout"),this.abort(8))},A.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wt(this,"complete"),Wt(this,"abort"),Hn(this))},A.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Hn(this,!0)),Vn.X.G.call(this)},A.za=function(){this.j||(this.A||this.l||this.g?Bn(this):this.Ua())},A.Ua=function(){Bn(this)},A.W=function(){try{return 2<Wn(this)?this.a.status:-1}catch(st){return-1}},A.$=function(){try{return this.a?this.a.responseText:""}catch(st){return""}},A.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Rn(e)}},A.ua=function(){return this.h},A.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(A=Yn.prototype).ha=8,A.v=1,A.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Le(this,this.c,t,void 0),r=this.l;if(this.O&&(r?rt(r=et(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ir(this,n,e),un(i=en(this.B),"RID",t),un(i,"CVER",22),this.A&&un(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&Jn(i,this.i,r),Nn(this.b,n),this.Ia&&un(i,"TYPE","init"),this.da?(un(i,"$req",e),un(i,"SID","null"),n.U=!0,Me(n,i,null)):Me(n,i,e),this.v=2}}else 3==this.v&&(t?nr(this,t):0==this.g.length||jn(this.b)||nr(this))},A.Aa=function(){if(this.j=null,ar(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Te(U(this.Ta,this),t)}},A.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,_e(10),$n(this),ar(this))},A.Sa=function(){null!=this.m&&(this.m=null,$n(this),sr(this),_e(19))},A.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),_e(2)):(this.c.info("Failed to ping google.com"),_e(1))},(A=yr.prototype).ta=function(){},A.sa=function(){},A.ra=function(){},A.qa=function(){},A.Ja=function(){},gr.prototype.a=function(t,e){return new br(t,e)},F(br,Kt),br.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;_e(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=dr(t,null,t.fa),er(t)},br.prototype.close=function(){Qn(this.a)},br.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,tr(this.a,e)}else this.l?((e={}).__data__=Xt(t),tr(this.a,e)):tr(this.a,t)},br.prototype.G=function(){this.a.f=null,delete this.f,Qn(this.a),delete this.a,br.X.G.call(this)},F(mr,De),F(wr,Ce),F(Ir,yr),Ir.prototype.ta=function(){Wt(this.a,"a")},Ir.prototype.sa=function(t){Wt(this.a,new mr(t))},Ir.prototype.ra=function(t){Wt(this.a,new wr(t))},Ir.prototype.qa=function(){Wt(this.a,"b")},gr.prototype.createWebChannel=gr.prototype.a,br.prototype.send=br.prototype.h,br.prototype.open=br.prototype.g,br.prototype.close=br.prototype.close,je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Ae.COMPLETE="complete",Ne.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",Kt.prototype.listen=Kt.prototype.va,Vn.prototype.listenOnce=Vn.prototype.wa,Vn.prototype.getLastError=Vn.prototype.Qa,Vn.prototype.getLastErrorCode=Vn.prototype.ua,Vn.prototype.getStatus=Vn.prototype.W,Vn.prototype.getResponseJson=Vn.prototype.Pa,Vn.prototype.getResponseText=Vn.prototype.$,Vn.prototype.send=Vn.prototype.ba;var Er=je,_r=Ae,Or=ge,Tr=Ne,jr=Vn,Ar=n("0RTl"),Sr=new _.b("@firebase/firestore");function Nr(){return Sr.logLevel}function xr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Sr.logLevel<=_.a.DEBUG){var r=e.map(Cr);Sr.debug.apply(Sr,Object(Ar.i)(["Firestore (8.2.4): "+t],r))}}function kr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Sr.logLevel<=_.a.ERROR){var r=e.map(Cr);Sr.error.apply(Sr,Object(Ar.i)(["Firestore (8.2.4): "+t],r))}}function Dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Sr.logLevel<=_.a.WARN){var r=e.map(Cr);Sr.warn.apply(Sr,Object(Ar.i)(["Firestore (8.2.4): "+t],r))}}function Cr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Gp){return t}}function Pr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.4) INTERNAL ASSERTION FAILED: "+t;throw kr(e),new Error(e)}function Lr(t,e){t||Pr()}function Rr(t,e){return t}function Vr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ur=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Vr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Mr(t,e){return t<e?-1:t>e?1:0}function qr(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Fr(t){return t+"\0"}var zr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Mr(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();zr.h=new zr("");var Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Br=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Ar.d)(e,t),e}(Error),Hr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(zr.fromBase64String(e))}catch(e){throw new Br(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(zr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Kr=function(t){this._=t};function Wr(){if("undefined"==typeof Uint8Array)throw new Br(Gr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Jr(){if("undefined"==typeof atob)throw new Br(Gr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.fromBase64String=function(t){return Jr(),new e(Hr.fromBase64String(t))},e.fromUint8Array=function(t){return Wr(),new e(Hr.fromUint8Array(t))},e.prototype.toBase64=function(){return Jr(),this._.toBase64()},e.prototype.toUint8Array=function(){return Wr(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Kr),Yr=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Qr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),$r=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();$r.UNAUTHENTICATED=new $r(null),$r.P=new $r("google-credentials-uid"),$r.g=new $r("first-party-uid");var Zr=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},ti=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t($r.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),ei=function(){function t(t){var e=this;this.C=null,this.currentUser=$r.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then(function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.F!==e?(xr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Lr("string"==typeof n.accessToken),new Zr(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return Lr(null===t||"string"==typeof t),new $r(t)},t}(),ni=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=$r.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ri=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new ni(this.k,this.M))},t.prototype.S=function(t){t($r.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),ii=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();ii.U=-1;var oi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?Mr(this.nanoseconds,t.nanoseconds):Mr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),si=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new oi(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),ui=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Pr(),void 0===n?n=t.length-e:n>t.length-e&&Pr(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ai=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Br(Gr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.at=function(){return new e([])},e}(ui),ci=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return ci.test(t)},e.prototype.ot=function(){return this.rt().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Br(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Br(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Br(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(ui),fi=function(){function t(t){this.path=t}return t.ft=function(e){return new t(ai.ct(e))},t.dt=function(e){return new t(ai.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ai.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return ai.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new ai(e.slice()))},t}();function li(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function di(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var vi=function(){function t(t){this.fields=t,t.sort(hi.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return qr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),yi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Lr(!!t),"string"==typeof t){var e=0,n=yi.exec(t);if(Lr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bi(t.seconds),nanos:bi(t.nanos)}}function bi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function mi(t){return"string"==typeof t?zr.fromBase64String(t):zr.fromUint8Array(t)}function wi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ii(t){var e=t.mapValue.fields.__previous_value__;return wi(e)?Ii(e):e}function Ei(t){var e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new oi(e.seconds,e.nanos)}function _i(t){return null==t}function Oi(t){return 0===t&&1/t==-1/0}function Ti(t){return"number"==typeof t&&Number.isInteger(t)&&!Oi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wi(t)?4:10:Pr()}function Ai(t,e){var n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ei(t).isEqual(Ei(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=gi(t.timestampValue),r=gi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return mi(t.bytesValue).isEqual(mi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bi(t.geoPointValue.latitude)===bi(e.geoPointValue.latitude)&&bi(t.geoPointValue.longitude)===bi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bi(t.integerValue)===bi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bi(t.doubleValue),r=bi(e.doubleValue);return n===r?Oi(n)===Oi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qr(t.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(li(n)!==li(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ai(n[i],r[i])))return!1;return!0}(t,e);default:return Pr()}}function Si(t,e){return void 0!==(t.values||[]).find(function(t){return Ai(t,e)})}function Ni(t,e){var n=ji(t),r=ji(e);if(n!==r)return Mr(n,r);switch(n){case 0:return 0;case 1:return Mr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=bi(t.integerValue||t.doubleValue),r=bi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return xi(t.timestampValue,e.timestampValue);case 4:return xi(Ei(t),Ei(e));case 5:return Mr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=mi(t),r=mi(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Mr(n[i],r[i]);if(0!==o)return o}return Mr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Mr(bi(t.latitude),bi(e.latitude));return 0!==n?n:Mr(bi(t.longitude),bi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ni(n[i],r[i]);if(o)return o}return Mr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Mr(r[s],o[s]);if(0!==u)return u;var a=Ni(n[r[s]],i[o[s]]);if(0!==a)return a}return Mr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Pr()}}function xi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Mr(t,e);var n=gi(t),r=gi(e),i=Mr(n.seconds,r.seconds);return 0!==i?i:Mr(n.nanos,r.nanos)}function ki(t){return Di(t)}function Di(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=gi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?mi(t.bytesValue).toBase64():"referenceValue"in t?fi.dt(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Di(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Di(t.fields[o])}return e+"}"}(t.mapValue):Pr();var e}function Ci(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function Pi(t){return!!t&&"integerValue"in t}function Li(t){return!!t&&"arrayValue"in t}function Ri(t){return!!t&&"nullValue"in t}function Vi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ui(t){return!!t&&"mapValue"in t}var Mi=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ui(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return Ai(this.proto,t.proto)},t}(),qi=function(){function t(t){void 0===t&&(t=Mi.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ji(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(hi.at(),this.Rt);return null!=t?new Mi(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=Ui(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Fi(t){var e=[];return pi(t.fields||{},function(t,n){var r=new hi([t]);if(Ui(n)){var i=Fi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new vi(e)}var zi=function(t,e){this.key=t,this.version=e},Gi=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Ar.d)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(zi),Bi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Ar.d)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(zi),Hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(zi),Ki=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function Wi(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ki(t,e,n,r,i,o,s)}function Ji(t){var e=Rr(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.ot()+t.op.toString()+ki(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.ot()+t.dir}(t)}).join(","),_i(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=uo(e.startAt)),e.endAt&&(n+="|ub:",n+=uo(e.endAt)),e.St=n}return e.St}function Xi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!co(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ai(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fo(t.startAt,e.startAt)&&fo(t.endAt,e.endAt)}function Yi(t){return fi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Ar.d)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new $i(t,n,r):"array-contains"===n?new no(t,r):"in"===n?new ro(t,r):"not-in"===n?new io(t,r):"array-contains-any"===n?new oo(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Zi(t,n):new to(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(Ni(e,this.value)):null!==e&&ji(this.value)===ji(e)&&this.Ct(Ni(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Pr()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),$i=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=fi.dt(r.referenceValue),i}return Object(Ar.d)(e,t),e.prototype.matches=function(t){var e=fi.J(t.key,this.key);return this.Ct(e)},e}(Qi),Zi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=eo(0,n),r}return Object(Ar.d)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Qi),to=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=eo(0,n),r}return Object(Ar.d)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Qi);function eo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return fi.dt(t.referenceValue)})}var no=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Ar.d)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Li(e)&&Si(e.arrayValue,this.value)},e}(Qi),ro=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Ar.d)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Si(this.value.arrayValue,e)},e}(Qi),io=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Ar.d)(e,t),e.prototype.matches=function(t){if(Si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Si(this.value.arrayValue,e)},e}(Qi),oo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Ar.d)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Li(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Si(e.value.arrayValue,t)})},e}(Qi),so=function(t,e){this.position=t,this.before=e};function uo(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return ki(t)}).join(",")}var ao=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function co(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ho(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?fi.J(fi.dt(s.referenceValue),n.key):Ni(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function fo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ai(t.position[n],e.position[n]))return!1;return!0}var lo=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Ft=null,this.Ot=null};function po(t,e,n,r,i,o,s,u){return new lo(t,e,n,r,i,o,s,u)}function vo(t){return new lo(t)}function yo(t){return!_i(t.limit)&&"F"===t.limitType}function go(t){return!_i(t.limit)&&"L"===t.limitType}function bo(t){return t.Nt.length>0?t.Nt[0].field:null}function mo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function wo(t){return null!==t.collectionGroup}function Io(t){var e=Rr(t);if(null===e.Ft){e.Ft=[];var n=mo(e),r=bo(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new ao(n)),e.Ft.push(new ao(hi.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var u=s[o];e.Ft.push(u),u.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new ao(hi.lt(),a))}}}return e.Ft}function Eo(t){var e=Rr(t);if(!e.Ot)if("F"===e.limitType)e.Ot=Wi(e.path,e.collectionGroup,Io(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Io(e);r<i.length;r++){var o=i[r];n.push(new ao(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new so(e.endAt.position,!e.endAt.before):null,u=e.startAt?new so(e.startAt.position,!e.startAt.before):null;e.Ot=Wi(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.Ot}function _o(t,e,n){return new lo(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Oo(t,e){return Xi(Eo(t),Eo(e))&&t.limitType===e.limitType}function To(t){return Ji(Eo(t))+"|lt:"+t.limitType}function jo(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.ot()+" "+e.op+" "+ki(e.value);var e}).join(", ")+"]"),_i(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+uo(t.startAt)),t.endAt&&(e+=", endAt: "+uo(t.endAt)),"Target("+e+")"}(Eo(t))+"; limitType="+t.limitType+")"}function Ao(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):fi.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ho(t.startAt,Io(t),e)||t.endAt&&ho(t.endAt,Io(t),e))}(t,e)}function So(t){return function(e,n){for(var r=!1,i=0,o=Io(t);i<o.length;i++){var s=o[i],u=No(s,e,n);if(0!==u)return u;r=r||s.field.ht()}return 0}}function No(t,e,n){var r=t.field.ht()?fi.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ni(r,i):Pr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pr()}}var xo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=si.min()),void 0===o&&(o=si.min()),void 0===s&&(s=zr.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function ko(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oi(e)?"-0":e}}function Do(t){return{integerValue:""+t}}function Co(t,e){return Ti(e)?Do(e):ko(t,e)}var Po=function(){this.Ut=void 0};function Lo(t,e,n){return t instanceof Uo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Mo?qo(t,e):t instanceof Fo?zo(t,e):function(t,e){var n=Vo(t,e),r=Bo(n)+Bo(t.Qt);return Pi(n)&&Pi(t.Qt)?Do(r):ko(t.Kt,r)}(t,e)}function Ro(t,e,n){return t instanceof Mo?qo(t,e):t instanceof Fo?zo(t,e):n}function Vo(t,e){return t instanceof Go?Pi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e}(Po),Mo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ar.d)(e,t),e}(Po);function qo(t,e){for(var n=Ho(e),r=function(t){n.some(function(e){return Ai(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ar.d)(e,t),e}(Po);function zo(t,e){for(var n=Ho(e),r=function(t){n=n.filter(function(e){return!Ai(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Go=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(Ar.d)(e,t),e}(Po);function Bo(t){return bi(t.integerValue||t.doubleValue)}function Ho(t){return Li(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ko=function(t,e){this.field=t,this.transform=e},Wo=function(t,e){this.version=t,this.transformResults=e},Jo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xo(t,e){return void 0!==t.updateTime?e instanceof Gi&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Gi}var Yo=function(){};function Qo(t,e,n){return t instanceof ns?function(t,e,n){var r=t.value;if(n.transformResults){var i=os(t.fieldTransforms,e,n.transformResults);r=us(t.fieldTransforms,r,i)}return new Gi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof rs?function(t,e,n){if(!Xo(t.Gt,e))return new Hi(t.key,n.version);var r=is(t,e,n.transformResults?os(t.fieldTransforms,e,n.transformResults):[]);return new Gi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Bi(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function $o(t,e,n,r){return t instanceof ns?function(t,e,n,r){if(!Xo(t.Gt,e))return e;var i=t.value,o=ss(t.fieldTransforms,n,e);i=us(t.fieldTransforms,i,o);var s=es(e);return new Gi(t.key,s,i,{bt:!0})}(t,e,r):t instanceof rs?function(t,e,n,r){if(!Xo(t.Gt,e))return e;var i=es(e),o=is(t,e,ss(t.fieldTransforms,n,e));return new Gi(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return Xo(t.Gt,e)?new Bi(t.key,si.min()):e}(t,e)}function Zo(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Gi?e.field(o.field):void 0,u=Vo(o.transform,s||null);null!=u&&(n=null==n?(new qi).set(o.field,u):n.set(o.field,u))}return n?n.yt():null}(t.fieldTransforms,e)}function ts(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qr(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Mo&&e instanceof Mo||t instanceof Fo&&e instanceof Fo?qr(t.elements,e.elements,Ai):t instanceof Go&&e instanceof Go?Ai(t.Qt,e.Qt):t instanceof Uo&&e instanceof Uo}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function es(t){return t instanceof Gi?t.version:si.min()}var ns=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(Ar.d)(e,t),e}(Yo),rs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object(Ar.d)(e,t),e}(Yo);function is(t,e,n){var r;return r=function(t,e){var n=new qi(e);return t.zt.fields.forEach(function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.yt()}(t,r=e instanceof Gi?e.data():Mi.empty()),us(t.fieldTransforms,r,n)}function os(t,e,n){var r=[];Lr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Gi&&(u=e.field(o.field)),r.push(Ro(s,u,n[i]))}return r}function ss(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Gi&&(c=n.field(u.field)),i.push(Lo(a,c,e))}return i}function us(t,e,n){for(var r=new qi(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var as,cs,hs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(Ar.d)(e,t),e}(Yo),fs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(Ar.d)(e,t),e}(Yo),ls=function(t){this.count=t};function ps(t){switch(t){case Gr.OK:return Pr();case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return!1;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return!0;default:return Pr()}}function ds(t){if(void 0===t)return kr("GRPC error has no .code"),Gr.UNKNOWN;switch(t){case as.OK:return Gr.OK;case as.CANCELLED:return Gr.CANCELLED;case as.UNKNOWN:return Gr.UNKNOWN;case as.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case as.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case as.INTERNAL:return Gr.INTERNAL;case as.UNAVAILABLE:return Gr.UNAVAILABLE;case as.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case as.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case as.NOT_FOUND:return Gr.NOT_FOUND;case as.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case as.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case as.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case as.ABORTED:return Gr.ABORTED;case as.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case as.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case as.DATA_LOSS:return Gr.DATA_LOSS;default:return Pr()}}(cs=as||(as={}))[cs.OK=0]="OK",cs[cs.CANCELLED=1]="CANCELLED",cs[cs.UNKNOWN=2]="UNKNOWN",cs[cs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cs[cs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cs[cs.NOT_FOUND=5]="NOT_FOUND",cs[cs.ALREADY_EXISTS=6]="ALREADY_EXISTS",cs[cs.PERMISSION_DENIED=7]="PERMISSION_DENIED",cs[cs.UNAUTHENTICATED=16]="UNAUTHENTICATED",cs[cs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cs[cs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cs[cs.ABORTED=10]="ABORTED",cs[cs.OUT_OF_RANGE=11]="OUT_OF_RANGE",cs[cs.UNIMPLEMENTED=12]="UNIMPLEMENTED",cs[cs.INTERNAL=13]="INTERNAL",cs[cs.UNAVAILABLE=14]="UNAVAILABLE",cs[cs.DATA_LOSS=15]="DATA_LOSS";var vs=function(){function t(t,e){this.J=t,this.root=e||gs.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,gs.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,gs.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Zt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new ys(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new ys(this.root,t,this.J,!1)},t.prototype.se=function(){return new ys(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new ys(this.root,t,this.J,!0)},t}(),ys=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),gs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw Pr();if(this.right._e())throw Pr();var t=this.left.me();if(t!==this.right.me())throw Pr();return t+(this._e()?0:1)},t}();gs.EMPTY=null,gs.RED=!0,gs.Jt=!1,gs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new gs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var bs=function(){function t(t){this.J=t,this.data=new vs(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt(function(e,n){return t(e),!1})},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new ms(this.data.ee())},t.prototype.ne=function(t){return new ms(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),ms=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),ws=new vs(fi.J);function Is(){return ws}function Es(){return Is()}var _s=new vs(fi.J);function Os(){return _s}var Ts=new vs(fi.J);function js(){return Ts}var As=new bs(fi.J);function Ss(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=As,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ns=new bs(Mr);function xs(){return Ns}var ks=function(){function t(t){this.J=t?function(e,n){return t(e,n)||fi.J(e.key,n.key)}:function(t,e){return fi.J(t.key,e.key)},this.Ve=Os(),this.pe=new vs(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),Ds=function(){function t(){this.ve=new vs(fi.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):Pr():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt(function(e,n){t.push(n)}),t},t}(),Cs=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=u}return t.Fe=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ks.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Oo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ps=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,Ls.Be(e,n)),new t(si.min(),r,xs(),Is(),Ss())},t}(),Ls=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(zr.h,n,Ss(),Ss(),Ss())},t}(),Rs=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Vs=function(t,e){this.targetId=t,this.Ge=e},Us=function(t,e,n,r){void 0===n&&(n=zr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ms=function(){function t(){this.ze=0,this.He=zs(),this.Je=zr.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=Ss(),e=Ss(),n=Ss();return this.He.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Pr()}}),new Ls(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=zs()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),qs=function(){function t(t){this.hn=t,this.ln=new Map,this._n=Is(),this.fn=Fs(),this.dn=new bs(Mr)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof Gi?this.En(r,t.je):t.je instanceof Bi&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:Pr()}})},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach(function(t,r){n.Rn(r)&&e(r)})},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Yi(i))if(0===n){var o=new fi(i.path);this.Tn(e,o,new Bi(o,si.min()))}else Lr(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach(function(r,i){var o=e.gn(i);if(o){if(r.qe&&Yi(o.target)){var s=new fi(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new Bi(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}});var r=Ss();this.fn.forEach(function(t,n){var i=!0;n.Re(function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ps(t,n,this.dn,this._n,r);return this._n=Is(),this.fn=Fs(),this.dn=new bs(Mr),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new Ms,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new bs(Mr),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||xr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new Ms),this.hn.Sn(t).forEach(function(n){e.Tn(t,n,null)})},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function Fs(){return new vs(fi.J)}function zs(){return new vs(fi.J)}var Gs={asc:"ASCENDING",desc:"DESCENDING"},Bs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hs=function(t,e){this.T=t,this.qt=e};function Ks(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ws(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Js(t,e){return Ks(t,e.G())}function Xs(t){return Lr(!!t),si.W(function(t){var e=gi(t);return new oi(e.seconds,e.nanos)}(t))}function Ys(t,e){return function(t){return new ai(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Qs(t){var e=ai.ct(t);return Lr(Iu(e)),e}function $s(t,e){return Ys(t.T,e.path)}function Zs(t,e){var n=Qs(e);if(n.get(1)!==t.T.projectId)throw new Br(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new Br(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new fi(ru(n))}function tu(t,e){return Ys(t.T,e)}function eu(t){var e=Qs(t);return 4===e.length?ai.at():ru(e)}function nu(t){return new ai(["projects",t.T.projectId,"databases",t.T.database]).ot()}function ru(t){return Lr(t.length>4&&"documents"===t.get(4)),t.X(5)}function iu(t,e,n){return{name:$s(t,e),fields:n.proto.mapValue.fields}}function ou(t,e,n){var r=Zs(t,e.name),i=Xs(e.updateTime),o=new Mi({mapValue:{fields:e.fields}});return new Gi(r,i,o,{hasCommittedMutations:!!n})}function su(t,e){var n;if(e instanceof ns)n={update:iu(t,e.key,e.value)};else if(e instanceof hs)n={delete:$s(t,e.key)};else if(e instanceof rs)n={update:iu(t,e.key,e.data),updateMask:wu(e.zt)};else{if(!(e instanceof fs))return Pr();n={verify:$s(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Uo)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mo)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof Fo)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Go)return{fieldPath:e.field.ot(),increment:n.Qt};throw Pr()}(0,t)})),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Js(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Pr()}(t,e.Gt)),n}function uu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Jo.updateTime(Xs(t.updateTime)):void 0!==t.exists?Jo.exists(t.exists):Jo.Wt()}(e.currentDocument):Jo.Wt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Lr("REQUEST_TIME"===e.setToServerValue),n=new Uo):"appendMissingElements"in e?n=new Mo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Fo(e.removeAllFromArray.values||[]):"increment"in e?n=new Go(t,e.increment):Pr();var r=hi._t(e.fieldPath);return new Ko(r,n)}(t,e)}):[];if(e.update){var i=Zs(t,e.update.name),o=new Mi({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new vi((t.fieldPaths||[]).map(function(t){return hi._t(t)}))}(e.updateMask);return new rs(i,o,s,n,r)}return new ns(i,o,n,r)}if(e.delete){var u=Zs(t,e.delete);return new hs(u,n)}if(e.verify){var a=Zs(t,e.verify);return new fs(a,n)}return Pr()}function au(t,e){return{documents:[tu(t,e.path)]}}function cu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=tu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tu(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Vi(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NAN"}};if(Ri(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vi(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NOT_NAN"}};if(Ri(t.value))return{unaryFilter:{field:yu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yu(t.field),op:vu(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:yu(t.field),direction:du(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||_i(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=lu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=lu(e.endAt)),n}function hu(t){var e=eu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Lr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=fu(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(t){return function(t){return new ao(gu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var a=null;n.limit&&(a=function(t){var e;return _i(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=pu(n.startAt));var h=null;return n.endAt&&(h=pu(n.endAt)),po(e,i,u,s,a,"F",c,h)}function fu(t){return t?void 0!==t.unaryFilter?[mu(t)]:void 0!==t.fieldFilter?[bu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return fu(t)}).reduce(function(t,e){return t.concat(e)}):Pr():[]}function lu(t){return{before:t.before,values:t.position}}function pu(t){return new so(t.values||[],!!t.before)}function du(t){return Gs[t]}function vu(t){return Bs[t]}function yu(t){return{fieldPath:t.ot()}}function gu(t){return hi._t(t.fieldPath)}function bu(t){return Qi.create(gu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Pr()}}(t.fieldFilter.op),t.fieldFilter.value)}function mu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=gu(t.unaryFilter.field);return Qi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=gu(t.unaryFilter.field);return Qi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gu(t.unaryFilter.field);return Qi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gu(t.unaryFilter.field);return Qi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Pr()}}function wu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.ot())}),{fieldPaths:e}}function Iu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Eu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},_u=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t(function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)},function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&Pr(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t(function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}})},t.prototype.Mn=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln(function(){return e(n)}):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.$n=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.$n(r)},t}(),Ou=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new Eu,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Au(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=Du(e.target.error);n.qn.reject(new Au(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Au(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(xr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Nu(e)},t}(),Tu=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object(O.g)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return xr("SimpleDb","Removing database:",t),xu(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Object(O.g)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(xr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Au(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Br(Gr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Au(t,n))},i.onupgradeneeded=function(t){xr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){xr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}})})},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Ar.b)(this,void 0,void 0,function(){var i,o,s,u,a;return Object(Ar.e)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return Object(Ar.e)(this,function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=f.sent(),e=Ou.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),_u.reject(t)}).Mn(),a={},s.catch(function(){}),[4,e.Un];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return xr("SimpleDb","Transaction failed with error:",(c=f.sent()).message,"Retrying:",h="FirebaseError"!==c.name&&o<3),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ju=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return xu(this.ts.delete())},t}(),Au=function(t){function e(e,n){var r=this;return(r=t.call(this,Gr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Ar.d)(e,t),e}(Br);function Su(t){return"IndexedDbTransactionError"===t.name}var Nu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(xr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(xr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),xu(n)},t.prototype.add=function(t){return xr("SimpleDb","ADD",this.store.name,t,t),xu(this.store.add(t))},t.prototype.get=function(t){var e=this;return xu(this.store.get(t)).next(function(n){return void 0===n&&(n=null),xr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return xr("SimpleDb","DELETE",this.store.name,t),xu(this.store.delete(t))},t.prototype.count=function(){return xr("SimpleDb","COUNT",this.store.name),xu(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.us=function(t,e){xr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,function(t,e,n){return n.delete()})},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new _u(function(n,r){e.onerror=function(t){var e=Du(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.cs=function(t,e){var n=[];return new _u(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ju(i),s=e(i.primaryKey,i.value,o);if(s instanceof _u){var u=s.catch(function(t){return o.done(),_u.reject(t)});n.push(u)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}}).next(function(){return _u.$n(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function xu(t){return new _u(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Du(t.target.error);n(e)}})}var ku=!1;function Du(t){var e=Tu.Kn(Object(O.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Br("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ku||(ku=!0,setTimeout(function(){throw r},0)),r}}return t}var Cu=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new Eu,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch(function(t){})}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout(function(){return e.Rs()},t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new Br(Gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys(function(){return null!==t.As?(t.clearTimeout(),t.op().then(function(e){return t.Ts.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function Pu(t,e){if(kr("AsyncQueue",e+": "+t),Su(t))return new Br(Gr.UNAVAILABLE,e+": "+t);throw t}var Lu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ru=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach(function(t){return t()})},t}();function Vu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Mu(e)),e=Uu(t.get(n),e);return Mu(e)}function Uu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Mu(t){return t+"\x01\x01"}function qu(t){var e=t.length;if(Lr(e>=2),2===e)return Lr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ai.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Pr(),t.charAt(s+1)){case"\x01":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Pr()}o=s+2}return new ai(r)}var Fu=function(t,e){this.seconds=t,this.nanoseconds=e},zu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};zu.store="owner",zu.key="owner";var Gu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Gu.store="mutationQueues",Gu.keyPath="userId";var Bu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bu.store="mutations",Bu.keyPath="batchId",Bu.userMutationsIndex="userMutationsIndex",Bu.userMutationsKeyPath=["userId","batchId"];var Hu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Vu(e)]},t.key=function(t,e,n){return[t,Vu(e),n]},t}();Hu.store="documentMutations",Hu.PLACEHOLDER=new Hu;var Ku=function(t,e){this.path=t,this.readTime=e},Wu=function(t,e){this.path=t,this.version=e},Ju=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ju.store="remoteDocuments",Ju.readTimeIndex="readTimeIndex",Ju.readTimeIndexPath="readTime",Ju.collectionReadTimeIndex="collectionReadTimeIndex",Ju.collectionReadTimeIndexPath=["parentPath","readTime"];var Xu=function(t){this.byteSize=t};Xu.store="remoteDocumentGlobal",Xu.key="remoteDocumentGlobalKey";var Yu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Yu.store="targets",Yu.keyPath="targetId",Yu.queryTargetsIndexName="queryTargetsIndex",Yu.queryTargetsKeyPath=["canonicalId","targetId"];var Qu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Qu.store="targetDocuments",Qu.keyPath=["targetId","path"],Qu.documentTargetsIndex="documentTargetsIndex",Qu.documentTargetsKeyPath=["path","targetId"];var $u=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$u.key="targetGlobalKey",$u.store="targetGlobal";var Zu=function(t,e){this.collectionId=t,this.parent=e};Zu.store="collectionParents",Zu.keyPath=["collectionId","parent"];var ta=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ta.store="clientMetadata",ta.keyPath="clientId";var ea=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ea.store="bundles",ea.keyPath="bundleId";var na=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};na.store="namedQueries",na.keyPath="name";var ra=Object(Ar.i)(Object(Ar.i)(Object(Ar.i)(Object(Ar.i)([Gu.store,Bu.store,Hu.store,Ju.store,Yu.store,zu.store,$u.store,Qu.store],[ta.store]),[Xu.store]),[Zu.store]),[ea.store,na.store]),ia=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return Object(Ar.d)(e,t),e}(Ru);function oa(t,e){var n=Rr(t);return Tu.Hn(n.bs,e)}var sa=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Qo(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=$o(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=$o(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ss())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&qr(this.mutations,t.mutations,function(t,e){return ts(t,e)})&&qr(this.baseMutations,t.baseMutations,function(t,e){return ts(t,e)})},t}(),ua=function(){function t(t,e,n,r){this.batch=t,this.Fs=e,this.Cs=n,this.Os=r}return t.from=function(e,n,r){Lr(e.mutations.length===r.length);for(var i=js(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),aa=function(t){this.ks=t};function ca(t,e){if(e.document)return ou(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=fi.Tt(e.noDocument.path),r=da(e.noDocument.readTime);return new Bi(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=fi.Tt(e.unknownDocument.path);return r=da(e.unknownDocument.version),new Hi(i,r)}return Pr()}function ha(t,e,n){var r=fa(n),i=e.key.path.Z().rt();if(e instanceof Gi){var o=function(t,e){return{name:$s(t,e.key),fields:e.vt().mapValue.fields,updateTime:Ks(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new Ju(null,null,o,s,r,i)}if(e instanceof Bi){var u=e.key.path.rt(),a=pa(e.version);return s=e.hasCommittedMutations,new Ju(null,new Ku(u,a),null,s,r,i)}if(e instanceof Hi){var c=e.key.path.rt(),h=pa(e.version);return new Ju(new Wu(c,h),null,null,!0,r,i)}return Pr()}function fa(t){var e=t.G();return[e.seconds,e.nanoseconds]}function la(t){var e=new oi(t[0],t[1]);return si.W(e)}function pa(t){var e=t.G();return new Fu(e.seconds,e.nanoseconds)}function da(t){var e=new oi(t.seconds,t.nanoseconds);return si.W(e)}function va(t,e){for(var n=(e.baseMutations||[]).map(function(e){return uu(t.ks,e)}),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map(function(e){return uu(t.ks,e)}),s=oi.fromMillis(e.localWriteTimeMs);return new sa(e.batchId,s,n,o)}function ya(t){var e,n,r=da(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?da(t.lastLimboFreeSnapshotVersion):si.min();return void 0!==t.query.documents?(Lr(1===(n=t.query).documents.length),e=Eo(vo(eu(n.documents[0])))):e=function(t){return Eo(hu(t))}(t.query),new xo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,zr.fromBase64String(t.resumeToken))}function ga(t,e){var n,r=pa(e.Mt),i=pa(e.lastLimboFreeSnapshotVersion);n=Yi(e.target)?au(t.ks,e.target):cu(t.ks,e.target);var o=e.resumeToken.toBase64();return new Yu(e.targetId,Ji(e.target),r,o,e.sequenceNumber,i,n)}function ba(t){var e=hu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_o(e,e.limit,"L"):e}var ma=function(){function t(){}return t.prototype.Ms=function(t,e){return wa(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:da(e.createTime),version:e.version};var e})},t.prototype.Ls=function(t,e){return wa(t).put({bundleId:(n=e).id,createTime:pa(Xs(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return Ia(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ba(e.bundledQuery),readTime:da(e.readTime)};var e})},t.prototype.Bs=function(t,e){return Ia(t).put(function(t){return{name:t.name,readTime:pa(Xs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function wa(t){return oa(t,ea.store)}function Ia(t){return oa(t,na.store)}var Ea=function(){function t(){this.qs=new _a}return t.prototype.Us=function(t,e){return this.qs.add(e),_u.resolve()},t.prototype.Qs=function(t,e){return _u.resolve(this.qs.getEntries(e))},t}(),_a=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new bs(ai.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new bs(ai.J)).rt()},t}(),Oa=function(){function t(){this.Ks=new _a}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs(function(){n.Ks.add(e)});var o={collectionId:r,parent:Vu(i)};return Ta(t).put(o)}return _u.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Fr(e),""],!1,!0);return Ta(t).os(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(qu(o.parent))}return n})},t}();function Ta(t){return oa(t,Zu.store)}var ja={Ws:!1,js:0,Gs:0,zs:0},Aa=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function Sa(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){if(t.code!==Gr.FAILED_PRECONDITION||t.message!==Lu)throw t;return xr("LocalStore","Unexpectedly lost primary lease"),[2]})})}Aa.Zs=10,Aa.ti=1e3,Aa.ei=new Aa(41943040,Aa.Zs,Aa.ti),Aa.ni=new Aa(-1,0,0);var Na=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.ii(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){pi(this.ri,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.nt=function(){return di(this.ri)},t}(),xa=function(){function t(){this.oi=new Na(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:si.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?_u.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function ka(t,e,n){var r=t.store(Bu.store),i=t.store(Hu.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ls({range:s},function(t,e,n){return u++,n.delete()});o.push(a.next(function(){Lr(1===u)}));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Hu.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return _u.$n(o).next(function(){return c})}function Da(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Pr();e=t.noDocument}return JSON.stringify(e).length}var Ca=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return Lr(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return La(t).ls({index:Bu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Pi=function(t,e,n,r){var i=this,o=Ra(t),s=La(t);return s.add({}).next(function(u){Lr("number"==typeof u);for(var a=new sa(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return su(t.ks,e)}),i=n.mutations.map(function(e){return su(t.ks,e)});return new Bu(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,a),h=[],f=new bs(function(t,e){return Mr(t.ot(),e.ot())}),l=0,p=r;l<p.length;l++){var d=p[l],v=Hu.key(i.userId,d.key.path,u);f=f.add(d.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,Hu.PLACEHOLDER))}return f.forEach(function(e){h.push(i.Ti.Us(t,e))}),t.Vs(function(){i.mi[u]=a.keys()}),_u.$n(h).next(function(){return a})})},t.prototype.yi=function(t,e){var n=this;return La(t).get(e).next(function(t){return t?(Lr(t.userId===n.userId),va(n.Kt,t)):null})},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?_u.resolve(this.mi[e]):this.yi(t,e).next(function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null})},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return La(t).ls({index:Bu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Lr(e.batchId>=r),o=va(n.Kt,e)),i.done()}).next(function(){return o})},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return La(t).ls({index:Bu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return La(t).os(Bu.userMutationsIndex,n).next(function(t){return t.map(function(t){return va(e.Kt,t)})})},t.prototype.vi=function(t,e){var n=this,r=Hu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ra(t).ls({range:i},function(r,i,s){var u=r[0],a=r[2],c=qu(r[1]);if(u===n.userId&&e.path.isEqual(c))return La(t).get(a).next(function(t){if(!t)throw Pr();Lr(t.userId===n.userId),o.push(va(n.Kt,t))});s.done()}).next(function(){return o})},t.prototype.Si=function(t,e){var n=this,r=new bs(Mr),i=[];return e.forEach(function(e){var o=Hu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Ra(t).ls({range:s},function(t,i,o){var s=t[0],u=t[2],a=qu(t[1]);s===n.userId&&e.path.isEqual(a)?r=r.add(u):o.done()});i.push(u)}),_u.$n(i).next(function(){return n.Di(t,r)})},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=Hu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new bs(Mr);return Ra(t).ls({range:s},function(t,e,o){var s=t[0],a=t[2],c=qu(t[1]);s===n.userId&&r.st(c)?c.length===i&&(u=u.add(a)):o.done()}).next(function(){return n.Di(t,u)})},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(La(t).get(e).next(function(t){if(null===t)throw Pr();Lr(t.userId===n.userId),r.push(va(n.Kt,t))}))}),_u.$n(i).next(function(){return r})},t.prototype.xi=function(t,e){var n=this;return ka(t.bs,this.userId,e).next(function(r){return t.Vs(function(){n.Ni(e.batchId)}),_u.forEach(r,function(e){return n.Ii.Fi(t,e)})})},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Oi=function(t){var e=this;return this.Ri(t).next(function(n){if(!n)return _u.resolve();var r=IDBKeyRange.lowerBound(Hu.prefixForUser(e.userId)),i=[];return Ra(t).ls({range:r},function(t,n,r){if(t[0]===e.userId){var o=qu(t[1]);i.push(o)}else r.done()}).next(function(){Lr(0===i.length)})})},t.prototype.ki=function(t,e){return Pa(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return Va(t).get(this.userId).next(function(t){return t||new Gu(e.userId,-1,"")})},t}();function Pa(t,e,n){var r=Hu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ra(t).ls({range:o,hs:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function La(t){return oa(t,Bu.store)}function Ra(t){return oa(t,Hu.store)}function Va(t){return oa(t,Gu.store)}var Ua=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),Ma=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next(function(n){var r=new Ua(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next(function(){return n.highestTargetId})})},t.prototype.Ki=function(t){return this.Ui(t).next(function(t){return si.W(new oi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Wi=function(t){return this.Ui(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.ji=function(t,e,n){var r=this;return this.Ui(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)})},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next(function(){return n.Ui(t).next(function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)})})},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next(function(){return qa(t).delete(e.targetId)}).next(function(){return n.Ui(t)}).next(function(e){return Lr(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)})},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return qa(t).ls(function(s,u){var a=ya(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Yi(t,a)))}).next(function(){return _u.$n(o)}).next(function(){return i})},t.prototype.mn=function(t,e){return qa(t).ls(function(t,n){var r=ya(n);e(r)})},t.prototype.Ui=function(t){return Fa(t).get($u.key).next(function(t){return Lr(null!==t),t})},t.prototype.Qi=function(t,e){return Fa(t).put($u.key,e)},t.prototype.zi=function(t,e){return qa(t).put(ga(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next(function(t){return t.targetCount})},t.prototype.er=function(t,e){var n=Ji(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qa(t).ls({range:r,index:Yu.queryTargetsIndexName},function(t,n,r){var o=ya(n);Xi(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.nr=function(t,e,n){var r=this,i=[],o=za(t);return e.forEach(function(e){var s=Vu(e.path);i.push(o.put(new Qu(n,s))),i.push(r.Ii.sr(t,n,e))}),_u.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=za(t);return _u.forEach(e,function(e){var o=Vu(e.path);return _u.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])})},t.prototype.Xi=function(t,e){var n=za(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=za(t),i=Ss();return r.ls({range:n,hs:!0},function(t,e,n){var r=qu(t[1]),o=new fi(r);i=i.add(o)}).next(function(){return i})},t.prototype.ki=function(t,e){var n=Vu(e.path),r=IDBKeyRange.bound([n],[Fr(n)],!1,!0),i=0;return za(t).ls({index:Qu.documentTargetsIndex,hs:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Dn=function(t,e){return qa(t).get(e).next(function(t){return t?ya(t):null})},t}();function qa(t){return oa(t,Yu.store)}function Fa(t){return oa(t,$u.store)}function za(t){return oa(t,Qu.store)}function Ga(t,e){var n=t[1],r=e[1],i=Mr(t[0],e[0]);return 0===i?Mr(n,r):i}var Ba=function(){function t(t){this.ar=t,this.buffer=new bs(Ga),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ga(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ha=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;xr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,function(){return Object(Ar.b)(e,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return Su(e=n.sent())?(xr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Sa(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}})})})},t}(),Ka=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.yr=function(t,e){var n=this;if(0===e)return _u.resolve(ii.U);var r=new Ba(e);return this.Ar.mn(t,function(t){return r.lr(t.sequenceNumber)}).next(function(){return n.Ar.gr(t,function(t){return r.lr(t)})}).next(function(){return r.maxValue})},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(xr("LruGarbageCollector","Garbage collection skipped; disabled"),_u.resolve(ja)):this.br(t).next(function(r){return r<n.params.Hs?(xr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),ja):n.vr(t,e)})},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Rr(t,this.params.Js).next(function(e){return e>c.params.Ys?(xr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ys+" from "+e),r=c.params.Ys):r=e,o=Date.now(),c.yr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Zi(t,n,e)}).next(function(e){return i=e,u=Date.now(),c.Vr(t,n)}).next(function(t){return a=Date.now(),Nr()<=_.a.DEBUG&&xr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),_u.resolve({Ws:!0,js:r,Gs:i,zs:t})})},t}(),Wa=function(){function t(t,e){this.db=t,this._r=function(t,e){return new Ka(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Sr=function(t){var e=0;return this.gr(t,function(t){e++}).next(function(){return e})},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,function(t,n){return e(n)})},t.prototype.sr=function(t,e,n){return Ja(t,n)},t.prototype.rr=function(t,e,n){return Ja(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Fi=function(t,e){return Ja(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return Va(t)._s(function(r){return Pa(t,r,e).next(function(t){return t&&(n=!0),_u.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Or().Fr(),i=[],o=0;return this.Cr(t,function(s,u){if(u<=e){var a=n.Nr(t,s).next(function(e){if(!e)return o++,r.fi(t,s).next(function(){return r._i(s),za(t).delete([0,Vu(s.path)])})});i.push(a)}}).next(function(){return _u.$n(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Ja(t,e)},t.prototype.Cr=function(t,e){var n,r=za(t),i=ii.U;return r.ls({index:Qu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ii.U&&e(new fi(qu(n)),i),i=s,n=o):i=ii.U}).next(function(){i!==ii.U&&e(new fi(qu(n)),i)})},t.prototype.br=function(t){return this.db.Or().Mr(t)},t}();function Ja(t,e){return za(t).put(function(t,e){return new Qu(0,Vu(t.path),e)}(e,t.vs))}var Xa=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return $a(t).put(Za(e),n)},t.prototype._i=function(t,e){var n=$a(t),r=Za(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Lr(t,r)})},t.prototype.fi=function(t,e){var n=this;return $a(t).get(Za(e)).next(function(t){return n.$r(t)})},t.prototype.Br=function(t,e){var n=this;return $a(t).get(Za(e)).next(function(t){var e=n.$r(t);return e?{li:e,size:Da(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Es();return this.qr(t,e,function(t,e){var i=n.$r(e);r=r.Ht(t,i)}).next(function(){return r})},t.prototype.Ur=function(t,e){var n=this,r=Es(),i=new vs(fi.J);return this.qr(t,e,function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,Da(e))):(r=r.Ht(t,null),i=i.Ht(t,0))}).next(function(){return{Qr:r,Kr:i}})},t.prototype.qr=function(t,e,n){if(e.nt())return _u.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return $a(t).ls({range:r},function(t,e,r){for(var s=fi.Tt(t);o&&fi.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ae()?i.ce():null})},t.prototype.Wr=function(t,e,n){var r=this,i=Os(),o=e.path.length+1,s={};if(n.isEqual(si.min())){var u=e.path.rt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.rt(),c=fa(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Ju.collectionReadTimeIndex}return $a(t).ls(s,function(t,n,s){if(t.length===o){var u=ca(r.Kt,n);e.path.st(u.key.path)?u instanceof Gi&&Ao(e,u)&&(i=i.Ht(u.key,u)):s.done()}}).next(function(){return i})},t.prototype.Fr=function(t){return new Ya(this,!!t&&t.jr)},t.prototype.Mr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Qa(t).get(Xu.key).next(function(t){return Lr(!!t),t})},t.prototype.Lr=function(t,e){return Qa(t).put(Xu.key,e)},t.prototype.$r=function(t){if(t){var e=ca(this.Kt,t);return e instanceof Bi&&e.version.isEqual(si.min())?null:e}return null},t}(),Ya=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.jr=n,r.zr=new Na(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Ar.d)(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new bs(function(t,e){return Mr(t.ot(),e.ot())});return this.oi.forEach(function(o,s){var u=e.zr.get(o);if(s.li){var a=ha(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var c=Da(a);r+=c-u,n.push(e.Gr.ui(t,o,a))}else if(r-=u,e.jr){var h=ha(e.Gr.Kt,new Bi(o,si.min()),e.ai(o));n.push(e.Gr.ui(t,o,h))}else n.push(e.Gr._i(t,o))}),i.forEach(function(r){n.push(e.Gr.Ti.Us(t,r))}),n.push(this.Gr.updateMetadata(t,r)),_u.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next(function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)})},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next(function(t){var e=t.Qr;return t.Kr.forEach(function(t,e){n.zr.set(t,e)}),e})},e}(xa);function Qa(t){return oa(t,Xu.store)}function $a(t){return oa(t,Ju.store)}function Za(t){return t.path.rt()}var tc=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;Lr(n<r&&n>=0&&r<=11);var o=new Ou("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(zu.store)}(t),function(t){t.createObjectStore(Gu.store,{keyPath:Gu.keyPath}),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath,autoIncrement:!0}).createIndex(Bu.userMutationsIndex,Bu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Hu.store)}(t),ec(t),function(t){t.createObjectStore(Ju.store)}(t));var s=_u.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Qu.store),t.deleteObjectStore(Yu.store),t.deleteObjectStore($u.store)}(t),ec(t)),s=s.next(function(){return function(t){var e=t.store($u.store),n=new $u(0,0,si.min().G(),0);return e.put($u.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Bu.store).os().next(function(n){t.deleteObjectStore(Bu.store),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath,autoIncrement:!0}).createIndex(Bu.userMutationsIndex,Bu.userMutationsKeyPath,{unique:!0});var r=e.store(Bu.store),i=n.map(function(t){return r.put(t)});return _u.$n(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ta.store,{keyPath:ta.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Hr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Xu.store)}(t),i.Jr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Yr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Xr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ju.store);e.createIndex(Ju.readTimeIndex,Ju.readTimeIndexPath,{unique:!1}),e.createIndex(Ju.collectionReadTimeIndex,Ju.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Zr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(ea.store,{keyPath:ea.keyPath})}(t),function(t){t.createObjectStore(na.store,{keyPath:na.keyPath})}(t)})),s},t.prototype.Jr=function(t){var e=0;return t.store(Ju.store).ls(function(t,n){e+=Da(n)}).next(function(){var n=new Xu(e);return t.store(Xu.store).put(Xu.key,n)})},t.prototype.Hr=function(t){var e=this,n=t.store(Gu.store),r=t.store(Bu.store);return n.os().next(function(n){return _u.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Bu.userMutationsIndex,i).next(function(r){return _u.forEach(r,function(r){Lr(r.userId===n.userId);var i=va(e.Kt,r);return ka(t,n.userId,i).next(function(){})})})})})},t.prototype.Yr=function(t){var e=t.store(Qu.store),n=t.store(Ju.store);return t.store($u.store).get($u.key).next(function(t){var r=[];return n.ls(function(n,i){var o=new ai(n),s=function(t){return[0,Vu(t)]}(o);r.push(e.get(s).next(function(n){return n?_u.resolve():function(n){return e.put(new Qu(0,Vu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return _u.$n(r)})})},t.prototype.Xr=function(t,e){t.createObjectStore(Zu.store,{keyPath:Zu.keyPath});var n=e.store(Zu.store),r=new _a,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:Vu(i)})}};return e.store(Ju.store).ls({hs:!0},function(t,e){var n=new ai(t);return i(n.Z())}).next(function(){return e.store(Hu.store).ls({hs:!0},function(t,e){var n=qu(t[1]);return i(n.Z())})})},t.prototype.Zr=function(t){var e=this,n=t.store(Yu.store);return n.ls(function(t,r){var i=ya(r),o=ga(e.Kt,i);return n.put(o)})},t}();function ec(t){t.createObjectStore(Qu.store,{keyPath:Qu.keyPath}).createIndex(Qu.documentTargetsIndex,Qu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Yu.store,{keyPath:Yu.keyPath}).createIndex(Yu.queryTargetsIndexName,Yu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore($u.store)}var nc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rc=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=u,this.no=c,this.so=h,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.Wn())throw new Br(Gr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new Wa(this,i),this.lo=n+"main",this.Kt=new aa(a),this._o=new Tu(this.lo,11,new tc(this.Kt)),this.fo=new Ma(this.Ii,this.Kt),this.Ti=new Oa,this.wo=function(t,e){return new Xa(t,e)}(this.Kt,this.Ti),this.Eo=new ma,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===h&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Br(Gr.FAILED_PRECONDITION,nc);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.fo.Wi(e)})}).then(function(e){t.io=new ii(e,t.no)}).then(function(){t.ro=!0}).catch(function(e){return t._o&&t._o.close(),Promise.reject(e)})},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return Object(Ar.b)(e,void 0,void 0,function(){return Object(Ar.e)(this,function(e){return this.Tr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn(function(n){return Object(Ar.b)(e,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys(function(){return Object(Ar.b)(e,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return oc(e).put(new ta(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.po(e).next(function(e){e||(t.isPrimary=!1,t.eo.bo(function(){return t.ho(!1)}))})}).next(function(){return t.vo(e)}).next(function(n){return t.isPrimary&&!n?t.So(e).next(function(){return!1}):!!n&&t.Do(e).next(function(){return!0})})}).catch(function(e){if(Su(e))return xr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return xr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.eo.bo(function(){return t.ho(e)}),t.isPrimary=e})},t.prototype.po=function(t){var e=this;return ic(t).get(zu.key).next(function(t){return _u.resolve(e.Co(t))})},t.prototype.xo=function(t){return oc(t).delete(this.clientId)},t.prototype.No=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.Fo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=oa(t,ta.store);return e.os().next(function(t){var n=r.Oo(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return _u.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.To)for(e=0,n=t;e<n.length;e++)this.To.removeItem(this.ko(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,function(){return t.Io().then(function(){return t.No()}).then(function(){return t.Ro()})})},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?_u.resolve(!0):ic(t).get(zu.key).next(function(n){if(null!==n&&e.Fo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new Br(Gr.FAILED_PRECONDITION,nc);return!1}}return!(!e.networkEnabled||!e.inForeground)||oc(t).os().next(function(t){return void 0===e.Oo(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&xr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.Lo=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t=this;return Object(Ar.e)(this,function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[zu.store,ta.store],function(e){var n=new ia(e,ii.U);return t.So(n).next(function(){return t.xo(n)})})];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}})})},t.prototype.Oo=function(t,e){var n=this;return t.filter(function(t){return n.Fo(t.updateTimeMs,e)&&!n.Mo(t.clientId)})},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return oc(e).os().next(function(e){return t.Oo(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return Ca.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.Wo=function(){return this.Ti},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return xr("IndexedDbPersistence","Starting transaction:",t),this._o.runTransaction(t,"readonly"===e?"readonly":"readwrite",ra,function(o){return r=new ia(o,i.io?i.io.next():ii.U),"readwrite-primary"===e?i.po(r).next(function(t){return!!t||i.vo(r)}).next(function(e){if(!e)throw kr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.eo.bo(function(){return i.ho(!1)}),new Br(Gr.FAILED_PRECONDITION,Lu);return n(r)}).next(function(t){return i.Do(r).next(function(){return t})}):i.Go(r).next(function(){return n(r)})}).then(function(t){return r.ps(),t})},t.prototype.Go=function(t){var e=this;return ic(t).get(zu.key).next(function(t){if(null!==t&&e.Fo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Br(Gr.FAILED_PRECONDITION,nc)})},t.prototype.Do=function(t){var e=new zu(this.clientId,this.allowTabSynchronization,Date.now());return ic(t).put(zu.key,e)},t.Wn=function(){return Tu.Wn()},t.prototype.So=function(t){var e=this,n=ic(t);return n.get(zu.key).next(function(t){return e.Co(t)?(xr("IndexedDbPersistence","Releasing primary lease."),n.delete(zu.key)):_u.resolve()})},t.prototype.Fo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(kr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys(function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()})},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys(function(){return e.Lo()})},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return xr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return kr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){kr("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ic(t){return oa(t,zu.store)}function oc(t){return oa(t,ta.store)}function sc(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var uc=function(t,e){this.progress=t,this.zo=e},ac=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next(function(r){return n.Yo(t,e,r)})},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t})},t.prototype.Xo=function(t,e,n){var r=Es();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)}),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next(function(e){return n.tc(t,e)})},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next(function(r){var i=n.Xo(t,e,r),o=Is();return i.forEach(function(t,e){e||(e=new Bi(t,si.min())),o=o.Ht(t,e)}),o})},t.prototype.Wr=function(t,e,n){return function(t){return fi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):wo(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new fi(e)).next(function(t){var e=Os();return t instanceof Gi&&(e=e.Ht(t.key,t)),e})},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Os();return this.Ti.Qs(t,i).next(function(s){return _u.forEach(s,function(s){var u=function(t,e){return new lo(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,u,n).next(function(t){t.forEach(function(t,e){o=o.Ht(t,e)})})}).next(function(){return o})})},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.Wr(t,e,n).next(function(n){return r=n,o.Ho.Ci(t,e)}).next(function(e){return o.ic(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=$o(a,r.get(c),0,o.Ss);r=h instanceof Gi?r.Ht(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Ao(e,n)||(r=r.remove(t))}),r})},t.prototype.ic=function(t,e,n){for(var r=Ss(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof rs&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.wo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Gi&&(c=c.Ht(t,e))}),c})},t}(),cc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=Ss(),i=Ss(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),hc=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.Wr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(si.min())?this.hc(t,e):this.uc.Zo(t,r).next(function(o){var s=i.lc(e,o);return(yo(e)||go(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(Nr()<=_.a.DEBUG&&xr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),jo(e)),i.uc.Wr(t,e,n).next(function(t){return s.forEach(function(e){t=t.Ht(e.key,e)}),t}))})},t.prototype.lc=function(t,e){var n=new bs(So(t));return e.forEach(function(e,r){r instanceof Gi&&Ao(t,r)&&(n=n.add(r))}),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return Nr()<=_.a.DEBUG&&xr("QueryEngine","Using full collection scan to execute query:",jo(e)),this.uc.Wr(t,e,si.min())},t}(),fc=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new vs(Mr),this.wc=new Na(function(t){return Ji(t)},Xi),this.Ec=si.min(),this.Ho=t.Ko(n),this.Tc=t.Or(),this.fo=t.Dr(),this.Ic=new ac(this.Tc,this.Ho,this.persistence.Wo()),this.Eo=t.jo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.pr(n,e.dc)})},t}();function lc(t,e,n,r){return new fc(t,e,n,r)}function pc(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ar.e)(this,function(s){switch(s.label){case 0:return n=Rr(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Ho.bi(t).next(function(s){return o=s,r=n.persistence.Ko(e),i=new ac(n.Tc,r,n.persistence.Wo()),r.bi(t)}).next(function(e){for(var n=[],r=[],s=Ss(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++)s=s.add(f[h].key)}for(var l=0,p=e;l<p.length;l++){var d=p[l];r.push(d.batchId);for(var v=0,y=d.mutations;v<y.length;v++)s=s.add(y[v].key)}return i.Zo(t,s).next(function(t){return{mc:t,Ac:n,Rc:r}})})})];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}})})}function dc(t,e){var n=Rr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Tc.Fr({jr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=_u.resolve();return o.forEach(function(t){s=s.next(function(){return r.fi(e,t)}).next(function(e){var o=e,s=n.Os.get(t);Lr(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Fs)})}),s.next(function(){return t.Ho.xi(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Ho.Oi(t)}).next(function(){return n.Ic.Zo(t,r)})})}function vc(t){var e=Rr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.fo.Ki(t)})}function yc(t,e){var n=Rr(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Tc.Fr({jr:!0});i=n.dc;var s=[];e.Oe.forEach(function(e,o){var u=i.get(o);if(u){s.push(n.fo.ir(t,e.Ke,o).next(function(){return n.fo.nr(t,e.Ue,o)}));var a=e.resumeToken;if(a.o()>0){var c=u.$t(a,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return Lr(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(u,c,e)&&s.push(n.fo.Ji(t,c))}}});var u=Is();if(e.Me.forEach(function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))}),s.push(gc(t,o,e.Me,r,void 0).next(function(t){u=t})),!r.isEqual(si.min())){var a=n.fo.Ki(t).next(function(e){return n.fo.ji(t,t.vs,r)});s.push(a)}return _u.$n(s).next(function(){return o.apply(t)}).next(function(){return n.Ic.tc(t,u)})}).then(function(t){return n.dc=i,t})}function gc(t,e,n,r,i){var o=Ss();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Is();return n.forEach(function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof Bi&&s.version.isEqual(si.min())?(e._i(n,a),o=o.Ht(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.ui(s,a),o=o.Ht(n,s)):xr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)}),o})}function bc(t,e){var n=Rr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)})}function mc(t,e){var n=Rr(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.fo.er(t,e).next(function(i){return i?_u.resolve(r=i):n.fo.qi(t).next(function(i){return r=new xo(e,i,0,t.vs),n.fo.Gi(t,r).next(function(){return r})})})}).then(function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t})}function wc(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:r=Rr(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ii.removeTarget(t,i)})];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Su(s=u.sent()))throw s;return xr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}})})}function Ic(t,e,n){var r=Rr(t),i=si.min(),o=Ss();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Rr(t),i=r.wc.get(n);return void 0!==i?_u.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,Eo(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next(function(t){o=t})}).next(function(){return r.fc.Wr(t,e,n?i:si.min(),n?o:Ss())}).next(function(t){return{documents:t,Pc:o}})})}function Ec(t,e){var n=Rr(t),r=Rr(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Dn(t,e).next(function(t){return t?t.target:null})})}function _c(t){var e=Rr(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Rr(t),i=Is(),o=fa(n),s=$a(e),u=IDBKeyRange.lowerBound(o,!0);return s.ls({index:Ju.readTimeIndex,range:u},function(t,e){var n=ca(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime}).next(function(){return{zo:i,readTime:la(o)}})}(e.Tc,t,e.Ec)}).then(function(t){var n=t.zo;return e.Ec=t.readTime,n})}function Oc(t){return Object(Ar.b)(this,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){return[2,(e=Rr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=$a(t),n=si.min();return e.ls({index:Ju.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=la(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Ec=t})]})})}function Tc(t,e,n,r){return Object(Ar.b)(this,void 0,void 0,function(){var i,o,s,u,a,c,h,f,l,p;return Object(Ar.e)(this,function(d){switch(d.label){case 0:for(i=Rr(t),o=Ss(),s=Is(),u=js(),a=0,c=n;a<c.length;a++)f=e.yc((h=c[a]).metadata.name),h.document&&(o=o.add(f)),s=s.Ht(f,e.gc(h)),u=u.Ht(f,e.Vc(h.metadata.readTime));return l=i.Tc.Fr({jr:!0}),[4,mc(i,function(t){return Eo(vo(ai.ct("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return gc(t,l,s,si.min(),u).next(function(e){return l.apply(t),e}).next(function(e){return i.fo.Xi(t,p.targetId).next(function(){return i.fo.nr(t,o,p.targetId)}).next(function(){return i.Ic.tc(t,e)})})})]}})})}function jc(t,e,n){return void 0===n&&(n=Ss()),Object(Ar.b)(this,void 0,void 0,function(){var r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return[4,mc(t,Eo(ba(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Rr(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Xs(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var s=r.$t(zr.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.fo.Ji(t,s).next(function(){return i.fo.Xi(t,r.targetId)}).next(function(){return i.fo.nr(t,n,r.targetId)}).next(function(){return i.Eo.Bs(t,e)})})]}})})}var Ac=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return _u.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Xs(n.createTime)}),_u.resolve()},t.prototype.$s=function(t,e){return _u.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:ba(t.bundledQuery),readTime:Xs(t.readTime)}}(e)),_u.resolve()},t}(),Sc=function(){function t(){this.Sc=new bs(Nc.Dc),this.Cc=new bs(Nc.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new Nc(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach(function(t){return n.sr(t,e)})},t.prototype.rr=function(t,e){this.Fc(new Nc(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach(function(t){return n.rr(t,e)})},t.prototype.kc=function(t){var e=this,n=new fi(new ai([])),r=new Nc(n,t),i=new Nc(n,t+1),o=[];return this.Cc.Ae([r,i],function(t){e.Fc(t),o.push(t.key)}),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach(function(e){return t.Fc(e)})},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new fi(new ai([])),n=new Nc(e,t),r=new Nc(e,t+1),i=Ss();return this.Cc.Ae([n,r],function(t){i=i.add(t.key)}),i},t.prototype.ki=function(t){var e=new Nc(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),Nc=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return fi.J(t.key,e.key)||Mr(t.$c,e.$c)},t.xc=function(t,e){return Mr(t.$c,e.$c)||fi.J(t.key,e.key)},t}(),xc=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new bs(Nc.Dc)}return t.prototype.Ri=function(t){return _u.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new sa(i,e,n,r);this.Ho.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.qc=this.qc.add(new Nc(a.key,i)),this.Ti.Us(t,a.key.path.Z())}return _u.resolve(o)},t.prototype.yi=function(t,e){return _u.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return _u.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.pi=function(){return _u.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return _u.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new Nc(e,0),i=new Nc(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],function(t){var e=n.Uc(t.$c);o.push(e)}),_u.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new bs(Mr);return e.forEach(function(t){var e=new Nc(t,0),i=new Nc(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],function(t){r=r.add(t.$c)})}),_u.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;fi.Et(i)||(i=i.child(""));var o=new Nc(new fi(i),0),s=new bs(Mr);return this.qc.Re(function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)},o),_u.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.Uc(t);null!==r&&n.push(r)}),n},t.prototype.xi=function(t,e){var n=this;Lr(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return _u.forEach(e.mutations,function(i){var o=new Nc(i.key,e.batchId);return r=r.delete(o),n.Ii.Fi(t,i.key)}).next(function(){n.qc=r})},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new Nc(e,0),r=this.qc.Pe(n);return _u.resolve(e.isEqual(r&&r.key))},t.prototype.Oi=function(t){return _u.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),kc=function(){function t(t,e){this.Ti=t,this.jc=e,this.docs=new vs(fi.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return _u.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=Es();return e.forEach(function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)}),_u.resolve(r)},t.prototype.Wr=function(t,e,n){for(var r=Os(),i=new fi(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),u=s.value,a=u.li,c=u.readTime;if(!e.path.st(s.key.path))break;c.u(n)<=0||a instanceof Gi&&Ao(e,a)&&(r=r.Ht(a.key,a))}return _u.resolve(r)},t.prototype.Gc=function(t,e){return _u.forEach(this.docs,function(t){return e(t)})},t.prototype.Fr=function(t){return new Dc(this)},t.prototype.Mr=function(t){return _u.resolve(this.size)},t}(),Dc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return Object(Ar.d)(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach(function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)}),_u.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(xa),Cc=function(){function t(t){this.persistence=t,this.zc=new Na(function(t){return Ji(t)},Xi),this.lastRemoteSnapshotVersion=si.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new Sc,this.targetCount=0,this.Yc=Ua.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach(function(t,n){return e(n)}),_u.resolve()},t.prototype.Ki=function(t){return _u.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Wi=function(t){return _u.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),_u.resolve(this.highestTargetId)},t.prototype.ji=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),_u.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Ua(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,_u.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),_u.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,_u.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach(function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,u.targetId)),i++)}),_u.$n(o).next(function(){return i})},t.prototype.tr=function(t){return _u.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return _u.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),_u.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach(function(e){i.push(r.Fi(t,e))}),_u.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),_u.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return _u.resolve(n)},t.prototype.ki=function(t,e){return _u.resolve(this.Jc.ki(e))},t}(),Pc=function(){function t(t,e){var n=this;this.Xc={},this.io=new ii(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new Cc(this),this.Ti=new Ea,this.wo=function(t,e){return new kc(t,function(t){return n.Ii.Zc(t)})}(this.Ti),this.Kt=new aa(e),this.Eo=new Ac(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.Wo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new xc(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;xr("MemoryPersistence","Starting transaction:",t);var i=new Lc(this.io.next());return this.Ii.ta(),n(i).next(function(t){return r.Ii.ea(i).next(function(){return t})}).Mn().then(function(t){return i.ps(),t})},t.prototype.na=function(t,e){return _u.Bn(Object.values(this.Xc).map(function(n){return function(){return n.ki(t,e)}}))},t}(),Lc=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return Object(Ar.d)(e,t),e}(Ru),Rc=function(){function t(t){this.persistence=t,this.sa=new Sc,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw Pr()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),_u.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),_u.resolve()},t.prototype.Fi=function(t,e){return this.oa.add(e.toString()),_u.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach(function(t){return n.oa.add(t.toString())});var r=this.persistence.Dr();return r.cr(t,e.targetId).next(function(t){t.forEach(function(t){return n.oa.add(t.toString())})}).next(function(){return r.Yi(t,e)})},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Or().Fr();return _u.forEach(this.oa,function(r){var i=fi.ft(r);return e.ca(t,i).next(function(t){t||n._i(i)})}).next(function(){return e.ia=null,n.apply(t)})},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next(function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())})},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return _u.Bn([function(){return _u.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function Vc(t,e){return"firestore_clients_"+t+"_"+e}function Uc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function Mc(t,e){return"firestore_targets_"+t+"_"+e}var qc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Br(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(kr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Br(r.error.code,r.error.message)),i?new t(e,r.state,o):(kr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=xs(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ti(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(kr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(kr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Bc=function(){function t(){this.activeTargetIds=xs()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Hc=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new vs(Mr),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Vc(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Bc),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,u,a,c,h=this;return Object(Ar.e)(this,function(f){switch(f.label){case 0:return[4,this.fa.Qo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Vc(this.persistenceKey,r)))&&(o=zc.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(u=this.ba(s))&&this.va(u),a=0,c=this.Ia;a<c.length;a++)this.Ea(c[a]);return this.Ia=[],this.window.addEventListener("unload",function(){return h.Lo()}),this.Tr=!0,[2]}})})},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(Mc(this.persistenceKey,t));if(n){var r=Fc.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(Mc(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach(function(t){r.Oa(t)}),this.currentUser=t,n.forEach(function(t){r.xa(t)})},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return xr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){xr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){xr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(xr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo(function(){return Object(Ar.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Ar.e)(this,function(u){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=ii.U;if(null!=t)try{var n=JSON.parse(t);Lr("number"==typeof n),e=n}catch(t){kr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ii.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new qc(this.currentUser,t,e,n),i=Uc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=Uc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=Mc(this.persistenceKey,t),i=new Fc(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return zc.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return qc.aa(new $r(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return Fc.aa(r,e)},t.prototype.ba=function(t){return Gc.aa(t)},t.prototype.Xa=function(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(xr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],u=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||u.push(t)}),this.fa.iu(s,u).then(function(){n.Ta=r})},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=xs();return t.forEach(function(t,n){e=e.ye(n.activeTargetIds)}),e},t}(),Kc=function(){function t(){this.ru=new Bc,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Bc,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Wc=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),Jc=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){xr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){xr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Xc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Yc=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Qc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(Ar.d)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise(function(i,o){var s=new jr;s.listenOnce(_r.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Er.NO_ERROR:var e=s.getResponseJson();xr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Er.TIMEOUT:xr("Connection",'RPC "'+t+'" timed out'),o(new Br(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case Er.HTTP_ERROR:var n=s.getStatus();if(xr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gr).indexOf(e)>=0?e:Gr.UNKNOWN}(r.status);o(new Br(u,r.message))}else o(new Br(Gr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Br(Gr.UNAVAILABLE,"Connection failed."));break;default:Pr()}}finally{xr("Connection",'RPC "'+t+'" completed.')}});var u=JSON.stringify(r);s.send(e,"POST",u,n,15)})},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new gr,i=me(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),Object(O.l)()||Object(O.n)()||Object(O.j)()||Object(O.k)()||Object(O.o)()||Object(O.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");xr("Connection","Creating WebChannel: "+s,o);var u=r.createWebChannel(s,o),a=!1,c=!1,h=new Yc({du:function(t){c?xr("Connection","Not sending because WebChannel is closed:",t):(a||(xr("Connection","Opening WebChannel transport."),u.open(),a=!0),xr("Connection","WebChannel sending:",t),u.send(t))},wu:function(){return u.close()}}),f=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return f(u,Tr.EventType.OPEN,function(){c||xr("Connection","WebChannel transport opened.")}),f(u,Tr.EventType.CLOSE,function(){c||(c=!0,xr("Connection","WebChannel transport closed"),h.Pu())}),f(u,Tr.EventType.ERROR,function(t){c||(c=!0,Dr("Connection","WebChannel transport errored:",t),h.Pu(new Br(Gr.UNAVAILABLE,"The operation could not be completed")))}),f(u,Tr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Lr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){xr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=as[t];if(void 0!==e)return ds(e)}(i),s=r.message;void 0===o&&(o=Gr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Pu(new Br(o,s)),u.close()}else xr("Connection","WebChannel received:",n),h.yu(n)}}),f(i,Or.STAT_EVENT,function(t){10===t.stat?xr("Connection","Detected buffering proxy"):11===t.stat&&xr("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Ru()},0),h},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);xr("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then(function(t){return xr("RestConnection","Received: ",t),t},function(e){throw Dr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.4",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+Xc[t]},t}());function $c(){return"undefined"!=typeof window?window:null}function Zc(){return"undefined"!=typeof document?document:null}function th(t){return new Hs(t,!0)}var eh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&xr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,function(){return e.Lu=Date.now(),t()}),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),nh=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new eh(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,function(){return t.th()}))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(t){return this.Ju()?[2,this.close(0)]:[2]})})},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===Gr.RESOURCE_EXHAUSTED?(kr(e.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===Gr.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}})})},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then(function(e){t.ju===n&&t.rh(e)},function(n){e(function(){var e=new Br(Gr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)})})},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu(function(){n(function(){return e.state=2,e.listener.Eu()})}),this.stream.Iu(function(t){n(function(){return e.oh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu(function(){return Object(Ar.b)(t,void 0,void 0,function(){return Object(Ar.e)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.oh=function(t){return xr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys(function(){return e.ju===t?n():(xr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),rh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object(Ar.d)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Pr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(Lr(void 0===e||"string"==typeof e),zr.fromBase64String(e||"")):(Lr(void 0===e||e instanceof Uint8Array),zr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Gr.UNKNOWN:ds(t.code);return new Br(e,t.message||"")}(u);n=new Us(r,i,o,s||null)}else if("documentChange"in e){i=Zs(t,(r=e.documentChange).document.name),o=Xs(r.document.updateTime);var u=new Mi({mapValue:{fields:r.document.fields}}),a=(s=new Gi(i,o,u,{}),r.targetIds||[]);n=new Rs(a,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Zs(t,(r=e.documentDelete).document),o=r.readTime?Xs(r.readTime):si.min(),u=new Bi(i,o),n=new Rs([],s=r.removedTargetIds||[],u.key,u);else if("documentRemove"in e)i=Zs(t,(r=e.documentRemove).document),n=new Rs([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Pr();var c=e.filter;i=new ls(r=c.count||0),n=new Vs(o=c.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return si.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?si.min():e.readTime?Xs(e.readTime):si.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=nu(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Yi(r)?{documents:au(t,r)}:{query:cu(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Ws(t,e.resumeToken):e.Mt.u(si.min())>0&&(n.readTime=Ks(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pr()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=nu(this.Kt),e.removeTarget=t,this.eh(e)},e}(nh),ih=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(Lr(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(Lr(void 0!==e),t.map(function(t){return function(t,e){var n=Xs(t.updateTime?t.updateTime:e);n.isEqual(si.min())&&(n=Xs(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Wo(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Xs(t.commitTime);return this.listener.wh(n,e)}return Lr(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=nu(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return su(e.Kt,t)})};this.eh(n)},e}(nh),oh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(Ar.d)(e,t),e.prototype.mh=function(){if(this.Ih)throw new Br(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then(function(i){return r.Ku.bu(t,e,n,i)}).catch(function(t){throw t.code===Gr.UNAUTHENTICATED&&r.credentials.v(),t})},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then(function(i){return r.Ku.Cu(t,e,n,i)}).catch(function(t){throw t.code===Gr.UNAUTHENTICATED&&r.credentials.v(),t})},e.prototype.terminate=function(){this.Ih=!1},e}(function(){}),sh=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()}))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(kr(e),this.Ph=!1):xr("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),uh=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu(function(t){n.ys(function(){return Object(Ar.b)(o,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return yh(this)?(xr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Ar.b)(this,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return(e=Rr(t)).Fh.add(4),[4,ch(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,ah(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Mh=new sh(n,r)};function ah(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:if(!yh(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ch(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function hh(t,e){var n=Rr(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),vh(n)?dh(n):kh(n).Ju()&&lh(n,e))}function fh(t,e){var n=Rr(t),r=kh(n);n.Nh.delete(e),r.Ju()&&ph(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():yh(n)&&n.Mh.set("Unknown"))}function lh(t,e){t.Lh.cn(e.targetId),kh(t).hh(e)}function ph(t,e){t.Lh.cn(e),kh(t).lh(e)}function dh(t){t.Lh=new qs({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),kh(t).start(),t.Mh.yh()}function vh(t){return yh(t)&&!kh(t).Hu()&&t.Nh.size>0}function yh(t){return 0===Rr(t).Fh.size}function gh(t){t.Lh=void 0}function bh(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){return t.Nh.forEach(function(e,n){lh(t,e)}),[2]})})}function mh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(n){return gh(t),vh(t)?(t.Mh.ph(e),dh(t)):t.Mh.set("Unknown"),[2]})})}function wh(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ar.e)(this,function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof Us&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ar.e)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),xr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ih(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Rs?t.Lh.wn(e):e instanceof Vs?t.Lh.yn(e):t.Lh.In(e),n.isEqual(si.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,vc(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach(function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}}),n.ke.forEach(function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(zr.h,n.Mt)),ph(t,e);var r=new xo(n.target,e,1,n.sequenceNumber);lh(t,r)}}),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return xr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ih(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Ih(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r=this;return Object(Ar.e)(this,function(i){switch(i.label){case 0:if(!Su(e))throw e;return t.Fh.add(1),[4,ch(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return vc(t.Sh)}),t.fs.bo(function(){return Object(Ar.b)(r,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return xr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,ah(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Eh(t,e){return e().catch(function(n){return Ih(t,n,e)})}function _h(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Ar.e)(this,function(s){switch(s.label){case 0:e=Rr(t),n=Dh(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return yh(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,bc(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=Dh(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ih(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Oh(e)&&Th(e),[2]}})})}function Oh(t){return yh(t)&&!Dh(t).Hu()&&t.xh.length>0}function Th(t){Dh(t).start()}function jh(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){return Dh(t).Th(),[2]})})}function Ah(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ar.e)(this,function(i){for(e=Dh(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]})})}function Sh(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return r=t.xh.shift(),i=ua.from(r,e,n),[4,Eh(t,function(){return t.Ch.qh(i)})];case 1:return o.sent(),[4,_h(t)];case 2:return o.sent(),[2]}})})}function Nh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(n){switch(n.label){case 0:return e&&Dh(t).fh?[4,function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return ps(r=e.code)&&r!==Gr.ABORTED?(n=t.xh.shift(),Dh(t).Xu(),[4,Eh(t,function(){return t.Ch.Uh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,_h(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Oh(t)&&Th(t),[2]}})})}function xh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return n=Rr(t),e?(n.Fh.delete(2),[4,ah(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,ch(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function kh(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Rr(t);return r.mh(),new rh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:bh.bind(null,t),Iu:mh.bind(null,t),uh:wh.bind(null,t)}),t.Oh.push(function(n){return Object(Ar.b)(e,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),vh(t)?dh(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),gh(t),e.label=3;case 3:return[2]}})})})),t.Qh}function Dh(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=Rr(t);return r.mh(),new ih(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:jh.bind(null,t),Iu:Nh.bind(null,t),Eh:Ah.bind(null,t),wh:Sh.bind(null,t)}),t.Oh.push(function(n){return Object(Ar.b)(e,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,_h(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(xr("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}})})})),t.Kh}var Ch=function(){this.Wh=void 0,this.listeners=[]},Ph=function(){this.queries=new Na(function(t){return To(t)},Oo),this.onlineState="Unknown",this.jh=new Set};function Lh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s,u,a;return Object(Ar.e)(this,function(c){switch(c.label){case 0:if(n=Rr(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ch),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=c.sent(),[3,4];case 3:return u=c.sent(),a=Pu(u,"Initialization of query '"+jo(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&Mh(n),[2]}})})}function Rh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ar.e)(this,function(u){return n=Rr(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]})})}function Vh(t,e){for(var n=Rr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=n.queries.get(s.query);if(u){for(var a=0,c=u.listeners;a<c.length;a++)c[a].Hh(s)&&(r=!0);u.Wh=s}}r&&Mh(n)}function Uh(t,e,n){var r=Rr(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Mh(t){t.jh.forEach(function(t){t.next()})}var qh=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Cs(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=Cs.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Fh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),zh=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Zs(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?ou(this.Kt,t.document,!1):new Bi(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Xs(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new zh(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),u=0,a=o.metadata.queries;u<a.length;u++){var c=a[u],h=(e.get(c)||Ss()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return[4,Tc(this.Sh,new zh(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,jc(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new uc(Object.assign({},this.progress),t))]}})})}}();var Gh=function(t){this.key=t},Bh=function(t){this.key=t},Hh=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Ss(),this.Ce=Ss(),this.ll=So(t),this._l=new ks(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new Ds,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,u=!1,a=yo(this.query)&&i.size===this.query.limit?i.last():null,c=go(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt(function(t,e){var h=i.get(t),f=e instanceof Gi?e:null;f&&(f=Ao(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.ll(f,a)>0||c&&n.ll(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),yo(this.query)||go(this.query))for(;s.size>this.query.limit;){var h=yo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:u,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pr()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)}),this.Tl(n);var s=e?this.Il():[],u=0===this.hl.size&&this.qe?1:0,a=u!==this.ul;return this.ul=u,0!==o.length||a?{snapshot:new Cs(this.query,t._l,i,o,t.Ce,0===u,a,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new Ds,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach(function(t){return e.al=e.al.add(t)}),t.Qe.forEach(function(t){}),t.Ke.forEach(function(t){return e.al=e.al.delete(t)}),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=Ss(),this._l.forEach(function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))});var n=[];return e.forEach(function(e){t.hl.has(e)||n.push(new Bh(e))}),this.hl.forEach(function(t){e.has(t)||n.push(new Gh(t))}),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=Ss();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return Cs.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Kh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Wh=function(t){this.key=t,this.yl=!1},Jh=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new Na(function(t){return To(t)},Oo),this.Dl=new Map,this.Cl=[],this.xl=new vs(fi.J),this.Nl=new Map,this.Fl=new Sc,this.Ol={},this.kl=new Map,this.Ml=Ua.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Xh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:return n=Tf(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,mc(n.Sh,Eo(e))];case 2:return o=u.sent(),s=n.pl.ka(o.targetId),[4,Yh(n,e,o.targetId,"current"===s)];case 3:r=u.sent(),n.$l&&hh(n.gl,o),u.label=4;case 4:return[2,r]}})})}function Yh(t,e,n,r){return Object(Ar.b)(this,void 0,void 0,function(){var i,o,s,u,a,c;return Object(Ar.e)(this,function(h){switch(h.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(Ar.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:return(i=e.view.dl(n))._c?[4,Ic(t.Sh,e.query,!1).then(function(t){return e.view.dl(t.documents,i)})]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ei(i,t.$l,o),[2,(hf(t,e.targetId,s.ml),s.snapshot)]}})})}(t,e,n,r)},[4,Ic(t.Sh,e,!0)];case 1:return i=h.sent(),o=new Hh(e,i.Pc),s=o.dl(i.documents),u=Ls.Be(n,r&&"Offline"!==t.onlineState),a=o.Ei(s,t.$l,u),hf(t,n,a.ml),c=new Kh(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),a.snapshot)]}})})}function Qh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return n=Rr(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter(function(t){return!Oo(t,e)})),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,wc(n.Sh,r.targetId,!1).then(function(){n.pl.Ba(r.targetId),fh(n.gl,r.targetId),af(n,r.targetId)}).catch(Sa)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return af(n,r.targetId),[4,wc(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function $h(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:r=jf(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=Rr(t),i=oi.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ss());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Ic.Zo(t,o).next(function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Zo(c,n.get(c.key));null!=h&&s.push(new rs(c.key,h,Fi(h.proto.mapValue),Jo.exists(!0)))}return r.Ho.Pi(t,i,s,e)})}).then(function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}})}(r.Sh,e)];case 2:return i=u.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new vs(Mr)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,pf(r,i.oi)];case 3:return u.sent(),[4,_h(r.gl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Pu(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Zh(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r;return Object(Ar.e)(this,function(i){switch(i.label){case 0:n=Rr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,yc(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach(function(t,e){var r=n.Nl.get(e);r&&(Lr(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?Lr(r.yl):t.Ke.size>0&&(Lr(r.yl),r.yl=!1))}),[4,pf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Sa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function tf(t,e,n){var r=Rr(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach(function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Rr(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)}),r&&Mh(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function ef(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o,s,u,a;return Object(Ar.e)(this,function(c){switch(c.label){case 0:return(r=Rr(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new vs(fi.J)).Ht(o,new Bi(o,si.min())),u=Ss().add(o),a=new Ps(si.min(),new Map,new bs(Mr),s,u),[4,Zh(r,a)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),lf(r),[3,4];case 2:return[4,wc(r.Sh,e,!1).then(function(){return af(r,e,n)}).catch(Sa)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function nf(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:n=Rr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,dc(n.Sh,e)];case 2:return i=o.sent(),uf(n,r,null),sf(n,r),n.pl.Fa(r,"acknowledged"),[4,pf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sa(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function rf(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:r=Rr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Rr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Ho.yi(t,e).next(function(e){return Lr(null!==e),r=e.keys(),n.Ho.xi(t,e)}).next(function(){return n.Ho.Oi(t)}).next(function(){return n.Ic.Zo(t,r)})})}(r.Sh,e)];case 2:return i=o.sent(),uf(r,e,n),sf(r,e),r.pl.Fa(e,"rejected",n),[4,pf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sa(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function of(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:yh((n=Rr(t)).gl)||xr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=Rr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Ho.pi(t)})}(n.Sh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=u.sent(),s=Pu(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function sf(t,e){(t.kl.get(e)||[]).forEach(function(t){t.resolve()}),t.kl.delete(e)}function uf(t,e,n){var r=Rr(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function af(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach(function(e){t.Fl.ki(e)||cf(t,e)})}function cf(t,e){var n=t.xl.get(e);null!==n&&(fh(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),lf(t))}function hf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Gh?(t.Fl.sr(o.key,e),ff(t,o)):o instanceof Bh?(xr("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.rr(o.key,e),t.Fl.ki(o.key)||cf(t,o.key)):Pr()}}function ff(t,e){var n=e.key;t.xl.get(n)||(xr("SyncEngine","New document in limbo: "+n),t.Cl.push(n),lf(t))}function lf(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Wh(e)),t.xl=t.xl.Ht(e,n),hh(t.gl,new xo(Eo(vo(e.path)),n,2,ii.U))}}function pf(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:return r=Rr(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach(function(t,u){s.push(r.Bl(u,e,n).then(function(t){if(t){r.$l&&r.pl.qa(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=cc.cc(u.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return u.sent(),r.vl.uh(i),[4,function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s,u,a,c;return Object(Ar.e)(this,function(h){switch(h.label){case 0:n=Rr(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return _u.forEach(e,function(e){return _u.forEach(e.rc,function(r){return n.persistence.Ii.sr(t,e.targetId,r)}).next(function(){return _u.forEach(e.oc,function(r){return n.persistence.Ii.rr(t,e.targetId,r)})})})})];case 2:return h.sent(),[3,4];case 3:if(!Su(r=h.sent()))throw r;return xr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=(s=o[i]).targetId,s.fromCache||(a=n.dc.get(u),c=a.Bt(a.Mt),n.dc=n.dc.Ht(u,c));return[2]}})})}(r.Sh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function df(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return(n=Rr(t)).currentUser.isEqual(e)?[3,3]:(xr("SyncEngine","User change. New user:",e.R()),[4,pc(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach(function(t){t.forEach(function(t){t.reject(new Br(Gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,pf(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function vf(t,e){var n=Rr(t),r=n.Nl.get(e);if(r&&r.yl)return Ss().add(r.key);var i=Ss(),o=n.Dl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=n.Sl.get(u[s]);i=i.ye(a.view.fl)}return i}function yf(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return[4,Ic((n=Rr(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&hf(n,e.targetId,i.ml),i)]}})})}function gf(t){return Object(Ar.b)(this,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){return[2,_c((e=Rr(t)).Sh).then(function(t){return pf(e,t)})]})})}function bf(t,e,n,r){return Object(Ar.b)(this,void 0,void 0,function(){var i,o;return Object(Ar.e)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Rr(t),r=Rr(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.gi(t,e).next(function(e){return e?n.Ic.Zo(t,e):_u.resolve(null)})})}((i=Rr(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,_h(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(uf(i,e,r||null),sf(i,e),function(t,e){Rr(Rr(t).Ho).Ni(e)}(i.Sh,e)):Pr(),s.label=4;case 4:return[4,pf(i,o)];case 5:return s.sent(),[3,7];case 6:xr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function mf(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s,u,a;return Object(Ar.e)(this,function(c){switch(c.label){case 0:return Tf(n=Rr(t)),jf(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,wf(n,r.rt())]);case 1:return i=c.sent(),n.Ll=!0,[4,xh(n.gl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)hh(n.gl,s[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(u=[],a=Promise.resolve(),n.Dl.forEach(function(t,e){n.pl.$a(e)?u.push(e):a=a.then(function(){return af(n,e),wc(n.Sh,e,!0)}),fh(n.gl,e)}),[4,a]);case 4:return c.sent(),[4,wf(n,u)];case 5:return c.sent(),function(t){var e=Rr(t);e.Nl.forEach(function(t,n){fh(e.gl,n)}),e.Fl.Mc(),e.Nl=new Map,e.xl=new vs(fi.J)}(n),n.Ll=!1,[4,xh(n.gl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function wf(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s,u,a,c,h,f,l,p,d;return Object(Ar.e)(this,function(v){switch(v.label){case 0:n=Rr(t),r=[],i=[],o=0,s=e,v.label=1;case 1:return o<s.length?(a=void 0,(c=n.Dl.get(u=s[o]))&&0!==c.length?[4,mc(n.Sh,Eo(c[0]))]:[3,7]):[3,13];case 2:a=v.sent(),h=0,f=c,v.label=3;case 3:return h<f.length?(l=n.Sl.get(f[h]),[4,yf(n,l)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ec(n.Sh,u)];case 8:return d=v.sent(),[4,mc(n.Sh,d)];case 9:return a=v.sent(),[4,Yh(n,If(d),u,!1)];case 10:v.sent(),v.label=11;case 11:r.push(a),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}})})}function If(t){return po(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ef(t){var e=Rr(t);return Rr(Rr(e.Sh).persistence).Qo()}function _f(t,e,n,r){return Object(Ar.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ar.e)(this,function(u){switch(u.label){case 0:return(i=Rr(t)).Ll?(xr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,_c(i.Sh)];case 3:return o=u.sent(),s=Ps.$e(e,"current"===n),[4,pf(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,wc(i.Sh,e,!0)];case 6:return u.sent(),af(i,e,r),[3,8];case 7:Pr(),u.label=8;case 8:return[2]}})})}function Of(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o,s,u,a,c,h,f;return Object(Ar.e)(this,function(l){switch(l.label){case 0:if(!(r=Tf(t)).Ll)return[3,10];i=0,o=e,l.label=1;case 1:return i<o.length?r.Dl.has(s=o[i])?(xr("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ec(r.Sh,s)]:[3,6];case 2:return u=l.sent(),[4,mc(r.Sh,u)];case 3:return a=l.sent(),[4,Yh(r,If(u),a.targetId,!1)];case 4:l.sent(),hh(r.gl,a),l.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,wc(r.Sh,t,!1).then(function(){fh(r.gl,t),af(r,t)}).catch(Sa)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},h=0,f=n,l.label=7;case 7:return h<f.length?[5,c(f[h])]:[3,10];case 8:l.sent(),l.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function Tf(t){var e=Rr(t);return e.gl.Ch.Bh=Zh.bind(null,e),e.gl.Ch.Sn=vf.bind(null,e),e.gl.Ch.$h=ef.bind(null,e),e.vl.uh=Vh.bind(null,e.Vl),e.vl.ql=Uh.bind(null,e.Vl),e}function jf(t){var e=Rr(t);return e.gl.Ch.qh=nf.bind(null,e),e.gl.Ch.Uh=rf.bind(null,e),e}var Af=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return this.Kt=th(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return lc(this.persistence,new hc,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new Pc(Rc.ra,this.Kt)},t.prototype.jl=function(t){return new Kc},t.prototype.terminate=function(){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}})})},t}(),Sf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Ar.d)(e,t),e.prototype.initialize=function(e){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Oc(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,jf(this.Xl.fa)];case 4:return n.sent(),[4,_h(this.Xl.gl)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return lc(this.persistence,new hc,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new Ha(this.persistence.Ii._r,t.fs)},e.prototype.Gl=function(t){var e=sc(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?Aa.Xs(this.cacheSizeBytes):Aa.ei;return new rc(this.synchronizeTabs,e,t.clientId,n,t.fs,$c(),Zc(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new Kc},e}(Af),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Ar.d)(e,t),e.prototype.initialize=function(e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r=this;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Hc?(this.pl.fa={nu:bf.bind(null,n),su:_f.bind(null,n),iu:Of.bind(null,n),Qo:Ef.bind(null,n),eu:gf.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po(function(t){return Object(Ar.b)(r,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return[4,mf(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jl=function(t){var e=$c();if(!Hc.Wn(e))throw new Br(Gr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sc(t.gu.T,t.gu.persistenceKey);return new Hc(e,t.fs,n,t.clientId,t.Yl)},e}(Sf),xf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n=this;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return tf(n.fa,t,1)},this.gl.Ch.s_=df.bind(null,this.fa),[4,xh(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Ph},t.prototype.Zl=function(t){var e=th(t.gu.T),n=new Qc(t.gu);return function(t,e,n){return new oh(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return tf(s.fa,t,0)},o=Jc.Wn()?new Jc:new Wc,new uh(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new Jh(t,e,n,r,i,o);return s&&(u.Ll=!0),u}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(Ar.b)(this,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return e=Rr(t),xr("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,ch(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}})})}(this.gl)},t}(),kf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Df=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new Eu,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then(function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Kl=function(){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}})})},t.prototype.a_=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new Fh(JSON.parse(r),t.length+n)]}})})},t.prototype.__=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.u_=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.l_=function(t){return Object(Ar.b)(this,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new hi(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),Cf=function(t){this._methodName=t};function Pf(t,e,n){if(!n)throw new Br(Gr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Lf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Br(Gr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Rf(t,e,n,r){if(!0===e&&!0===r)throw new Br(Gr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Vf(t){if(!fi.Et(t))throw new Br(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Uf(t){if(fi.Et(t))throw new Br(Gr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Mf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Pr()}function qf(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Br(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mf(t);throw new Br(Gr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ff(t,e){if(e<=0)throw new Br(Gr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var zf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Br(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Br(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Rf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Gf=new Map,Bf=function(){function t(t,e){this.w_="(lite)",this.E_=new zf({}),this.T_=!1,t instanceof Qr?(this.I_=t,this.m_=new ti):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Br(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(t.options.projectId)}(t),this.m_=new ei(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Br(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Br(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new zf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new ti;switch(t.type){case"gapi":var e=t.client;return Lr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ri(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Br(Gr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=Gf.get(this))&&(xr("ComponentProvider","Removing Datastore"),Gf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Hf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Wf(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Kf=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,vo(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Hf(this.firestore,null,new fi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Kf);function Jf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Kr&&(t=t._),Pf("collection","path",e),t instanceof Bf)return Uf(n=ai.ct.apply(ai,Object(Ar.i)([e],r))),new Wf(t,null,n);if(!(t instanceof Hf||t instanceof Wf))throw new Br(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uf(n=ai.ct.apply(ai,Object(Ar.i)([t.path],r)).child(ai.ct(e))),new Wf(t.firestore,null,n)}function Xf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Kr&&(t=t._),1===arguments.length&&(e=Ur.t()),Pf("doc","path",e),t instanceof Bf)return Vf(n=ai.ct.apply(ai,Object(Ar.i)([e],r))),new Hf(t,null,new fi(n));if(!(t instanceof Hf||t instanceof Wf))throw new Br(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Vf(n=t.D_.child(ai.ct.apply(ai,Object(Ar.i)([e],r)))),new Hf(t.firestore,t instanceof Wf?t.v_:null,new fi(n))}function Yf(t,e){return t instanceof Kr&&(t=t._),e instanceof Kr&&(e=e._),(t instanceof Hf||t instanceof Wf)&&(e instanceof Hf||e instanceof Wf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Qf(t,e){return t instanceof Kr&&(t=t._),e instanceof Kr&&(e=e._),t instanceof Kf&&e instanceof Kf&&t.firestore===e.firestore&&Oo(t.C_,e.C_)&&t.v_===e.v_}var $f=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Br(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Br(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return Mr(this.x_,t.x_)||Mr(this.N_,t.N_)},t}(),Zf=/^__.*__$/,tl=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new rs(t,this.data,this.zt,e,this.fieldTransforms):new ns(t,this.data,e,this.fieldTransforms)},t}(),el=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new rs(t,this.data,this.zt,e,this.fieldTransforms)},t}();function nl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pr()}}var rl=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return _l(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find(function(e){return t.st(e)})||void 0!==this.fieldTransforms.find(function(e){return t.st(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(nl(this.k_)&&Zf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),il=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||th(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new rl({k_:t,methodName:e,j_:n,path:hi.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function ol(t){var e=t.p_(),n=th(t.I_);return new il(t.I_,!!e.ignoreUndefinedProperties,n)}function sl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);ml("Data must be an object, but it was:",s,r);var u,a,c=gl(r,s);if(o.merge)u=new vi(s.zt),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=wl(e,l[f],n);if(!s.contains(p))throw new Br(Gr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Ol(h,p)||h.push(p)}u=new vi(h),a=s.fieldTransforms.filter(function(t){return u.It(t.field)})}else u=null,a=s.fieldTransforms;return new tl(new Mi(c),u,a)}var ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Cf);function al(t,e,n){return new rl({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.z_=function(t){return new Ko(t.path,new Uo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Cf),hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Ar.d)(e,t),e.prototype.z_=function(t){var e=al(this,t,!0),n=this.H_.map(function(t){return yl(t,e)}),r=new Mo(n);return new Ko(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cf),fl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Ar.d)(e,t),e.prototype.z_=function(t){var e=al(this,t,!0),n=this.H_.map(function(t){return yl(t,e)}),r=new Fo(n);return new Ko(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cf),ll=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Ar.d)(e,t),e.prototype.z_=function(t){var e=new Go(t.Kt,Co(t.Kt,this.J_));return new Ko(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Cf);function pl(t,e,n,r){var i=t.G_(1,e,n);ml("Data must be an object, but it was:",i,r);var o=[],s=new qi;pi(r,function(t,r){var u=El(e,t,n);r instanceof Kr&&(r=r._);var a=i.U_(u);if(r instanceof ul)o.push(u);else{var c=yl(r,a);null!=c&&(o.push(u),s.set(u,c))}});var u=new vi(o);return new el(s.yt(),u,i.fieldTransforms)}function dl(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[wl(e,r,n)],a=[i];if(o.length%2!=0)throw new Br(Gr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(wl(e,o[c])),a.push(o[c+1]);for(var h=[],f=new qi,l=u.length-1;l>=0;--l)if(!Ol(h,u[l])){var p=u[l],d=a[l];d instanceof Kr&&(d=d._);var v=s.U_(p);if(d instanceof ul)h.push(p);else{var y=yl(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new vi(h);return new el(f.yt(),g,s.fieldTransforms)}function vl(t,e,n,r){return void 0===r&&(r=!1),yl(n,t.G_(r?4:3,e))}function yl(t,e){if(t instanceof Kr&&(t=t._),bl(t))return ml("Unsupported field value:",e,t),gl(t,e);if(t instanceof Cf)return function(t,e){if(!nl(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=yl(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Kr&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Co(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=oi.fromDate(t);return{timestampValue:Ks(e.Kt,n)}}if(t instanceof oi)return n=new oi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ks(e.Kt,n)};if(t instanceof $f)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hr)return{bytesValue:Ws(e.Kt,t.l)};if(t instanceof Hf){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ys(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Mf(t))}(t,e)}function gl(t,e){var n={};return di(t)?e.path&&e.path.length>0&&e.zt.push(e.path):pi(t,function(t,r){var i=yl(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function bl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof oi||t instanceof $f||t instanceof Hr||t instanceof Hf||t instanceof Cf)}function ml(t,e,n){if(!bl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Mf(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function wl(t,e,n){if(e instanceof Kr&&(e=e._),e instanceof Df)return e.d_;if("string"==typeof e)return El(t,e);throw _l("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Il=new RegExp("[~\\*/\\[\\]]");function El(t,e,n){if(e.search(Il)>=0)throw _l("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Df.bind.apply(Df,Object(Ar.i)([void 0],e.split("."))))).d_}catch(r){throw _l("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function _l(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Br(Gr.INVALID_ARGUMENT,(u+=". ")+t+a)}function Ol(t,e){return t.some(function(t){return t.isEqual(e)})}var Tl=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ar.e)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Br(Gr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i,o,s,u;return Object(Ar.e)(this,function(a){switch(a.label){case 0:return n=Rr(t),r=nu(n.Kt)+"/documents",i={documents:e.map(function(t){return $s(n.Kt,t)})},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Lr(!!e.found);var n=Zs(t,e.found.name),r=Xs(e.found.updateTime),i=new Mi({mapValue:{fields:e.found.fields}});return new Gi(n,r,i,{})}(t,e):"missing"in e?function(t,e){Lr(!!e.missing),Lr(!!e.readTime);var n=Zs(t,e.missing),r=Xs(e.readTime);return new Bi(n,r)}(t,e):Pr()}(n.Kt,t);s.set(e.key.toString(),e)}),u=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Lr(!!e),u.push(e)}),u)]}})})}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Bi||t instanceof Gi?n.sf(t):Pr()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new hs(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ar.e)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=fi.ft(n);e.mutations.push(new fs(r,e.Gt(r)))}),[4,function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return n=Rr(t),r=nu(n.Kt)+"/documents",i={writes:e.map(function(t){return su(n.Kt,t)})},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Gi)e=t.version;else{if(!(t instanceof Bi))throw Pr();e=si.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Br(Gr.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Jo.updateTime(e):Jo.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(si.min()))throw new Br(Gr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jo.updateTime(e)}return Jo.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),jl=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new eh(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu(function(){return Object(Ar.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Ar.e)(this,function(r){return t=new Tl(this.Dh),(e=this.uf(t))&&e.then(function(e){n.fs.ys(function(){return t.commit().then(function(){n.Ts.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!_i(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys(function(){return e.af(),Promise.resolve()})):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ps(e)}return!1},t}(),Al=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=$r.UNAUTHENTICATED,this.clientId=Ur.t(),this._f=function(){},this.N=new Eu,this.credentials.S(function(t){xr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()})}return t.prototype.getConfiguration=function(){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this.fs.wf)throw new Br(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new Eu;return this.fs.Tf(function(){return Object(Ar.b)(t,void 0,void 0,function(){var t,n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Pu(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Sl(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return t.fs.Af(),xr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff(function(n){r.isEqual(n)||(r=n,t.fs.bo(function(){return Object(Ar.b)(i,void 0,void 0,function(){return Object(Ar.e)(this,function(t){switch(t.label){case 0:return[4,pc(e.Sh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.yo(function(){return t.terminate()}),t.mf=e,[2]}})})}function Nl(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return t.fs.Af(),[4,xl(t)];case 1:return n=i.sent(),xr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t.fs.bo(function(){return function(t,e){return Object(Ar.b)(this,void 0,void 0,function(){var n,r;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return(n=Rr(t)).fs.Af(),xr("RemoteStore","RemoteStore received new credentials"),r=yh(n),n.Fh.add(3),[4,ch(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,ah(n)];case 3:return i.sent(),[2]}})})}(e.gl,n)})}),t.If=e,[2]}})})}function xl(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(xr("FirestoreClient","Using default OfflineComponentProvider"),[4,Sl(t,new Af)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function kl(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(xr("FirestoreClient","Using default OnlineComponentProvider"),[4,Nl(t,new xf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function Dl(t){return xl(t).then(function(t){return t.persistence})}function Cl(t){return xl(t).then(function(t){return t.Sh})}function Pl(t){return kl(t).then(function(t){return t.gl})}function Ll(t){return kl(t).then(function(t){return t.fa})}function Rl(t){return Object(Ar.b)(this,void 0,void 0,function(){var e,n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return[4,kl(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Xh.bind(null,e.fa),n.Jh=Qh.bind(null,e.fa),n)]}})})}function Vl(t,e,n){var r=this;void 0===n&&(n={});var i=new Eu;return t.fs.ys(function(){return Object(Ar.b)(r,void 0,void 0,function(){var r;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kf({next:function(o){e.ys(function(){return Rh(t,s)});var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Br(Gr.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Br(Gr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new qh(vo(n.path),o,{includeMetadataChanges:!0,sl:!0});return Lh(t,s)},[4,Rl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}})})}),i.promise}function Ul(t,e,n){var r=this;void 0===n&&(n={});var i=new Eu;return t.fs.ys(function(){return Object(Ar.b)(r,void 0,void 0,function(){var r;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kf({next:function(n){e.ys(function(){return Rh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Br(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new qh(n,o,{includeMetadataChanges:!0,sl:!0});return Lh(t,s)},[4,Rl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}})})}),i.promise}var Ml=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new eh(this,"async_queue_retry"),this.vf=function(){var e=Zc();e&&xr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=Zc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Zc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ar.e)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Su(t=n.sent()))throw t;return xr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,kr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Cu.Is(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Pr()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Ar.b)(this,void 0,void 0,function(){var t;return Object(Ar.e)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ws-e.ws});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()})},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Ml,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Ar.d)(e,t),e.prototype.b_=function(){return this.Lf||zl(this),this.Lf.terminate()},e}(Bf);function Fl(t){return t.Lf||zl(t),t.Lf.df(),t.Lf}function zl(t){var e=t.p_(),n=function(t,e,n){return new Yr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Al(t.m_,t.Mf,n)}function Gl(t,e,n){var r=this,i=new Eu;return t.fs.enqueue(function(){return Object(Ar.b)(r,void 0,void 0,function(){var r;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Sl(t,n)];case 1:return o.sent(),[4,Nl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Gr.FAILED_PRECONDITION||t.code===Gr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Bl(t){if(t.R_||t.P_)throw new Br(Gr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hl=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),ji(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bi(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(mi(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw Pr()}},t.prototype.jf=function(t,e){var n=this,r={};return pi(t.fields||{},function(t,i){r[t]=n.$f(i,e)}),r},t.prototype.Kf=function(t){return new $f(bi(t.latitude),bi(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.$f(t,e)})},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Ii(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Ei(t));default:return null}},t.prototype.Bf=function(t){var e=gi(t);return new oi(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=ai.ct(t);Lr(Iu(n));var r=new Qr(n.get(1),n.get(3)),i=new fi(n.X(5));return r.isEqual(e)||kr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Kl=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hf(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Wl(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Jl("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Kl);function Jl(t,e){return"string"==typeof e?El(t,e):e instanceof Kr?e._.d_:e.d_}function Xl(t){if(go(t)&&0===t.Nt.length)throw new Br(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yl=function(){};function Ql(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var $l=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(Ar.d)(e,t),e.prototype.Yf=function(t){var e=ol(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new Br(Gr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){op(s,o);for(var a=[],c=0,h=s;c<h.length;c++)a.push(ip(r,t,h[c]));u={arrayValue:{values:a}}}else u=ip(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||op(s,o),u=vl(n,"where",s,"in"===o||"not-in"===o);var f=Qi.create(i,o,u);return function(t,e){if(e.xt()){var n=mo(t);if(null!==n&&!n.isEqual(e.field))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=bo(t);null!==r&&sp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Br(Gr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Kf(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Yl),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(Ar.d)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ao(e,n);return function(t,e){if(null===bo(t)){var n=mo(t);null!==n&&sp(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Kf(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new lo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Yl),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(Ar.d)(e,t),e.prototype.Yf=function(t){return new Kf(t.firestore,t.v_,_o(t.C_,this.nd,this.sd))},e}(Yl),ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(Ar.d)(e,t),e.prototype.Yf=function(t){var e=rp(t,this.type,this.rd,this.od);return new Kf(t.firestore,t.v_,function(t,e){return new lo(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Yl),np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(Ar.d)(e,t),e.prototype.Yf=function(t){var e=rp(t,this.type,this.rd,this.od);return new Kf(t.firestore,t.v_,function(t,e){return new lo(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Yl);function rp(t,e,n,r){if(n[0]instanceof Kr&&(n[0]=n[0]._),n[0]instanceof Kl)return function(t,e,n,r,i){if(!r)throw new Br(Gr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Io(t);s<u.length;s++){var a=u[s];if(a.field.ht())o.push(Ci(e,r.key));else{var c=r.field(a.field);if(wi(c))throw new Br(Gr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.ot();throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new so(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=ol(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new Br(Gr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ht()){if("string"!=typeof c)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!wo(t)&&-1!==c.indexOf("/"))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ai.ct(c));if(!fi.Et(h))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new fi(h);u.push(Ci(e,f))}else{var l=vl(n,r,c);u.push(l)}}return new so(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function ip(t,e,n){if(n instanceof Kr&&(n=n._),"string"==typeof n){if(""===n)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wo(e)&&-1!==n.indexOf("/"))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ai.ct(n));if(!fi.Et(r))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ci(t,new fi(r))}if(n instanceof Hf)return Ci(t,n.S_);throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Mf(n)+".")}function op(t,e){if(!Array.isArray(t)||0===t.length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Br(Gr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function sp(t,e,n){if(!n.isEqual(e))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function up(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function ap(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ar.d)(e,t),e.prototype.Uf=function(t){return new Hr(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Hf(this.firestore,null,e)},e}(Hl),hp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),fp=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return Object(Ar.d)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new lp(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Jl("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Kl),lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(fp),pp=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new hp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach(function(r){t.call(e,new lp(n.zf,n.Hf,r.key,r,new hp(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new Br(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map(function(e){return{type:"added",doc:new lp(t.zf,t.Hf,e.doc.key,e.doc,new hp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t.ud.De;return t.ud.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new lp(t.zf,t.Hf,e.doc.key,e.doc,new hp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:dp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.ld=e),this.hd},t}();function dp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pr()}}function vp(t,e){return t instanceof fp&&e instanceof fp?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof pp&&e instanceof pp&&t.zf===e.zf&&Qf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var yp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ar.d)(e,t),e.prototype.Uf=function(t){return new Hr(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Hf(this.firestore,null,e)},e}(Hl);function gp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=qf(t,Hf);var o=qf(t.firestore,ql),s=ol(o);return e instanceof Kr&&(e=e._),mp(o,[("string"==typeof e||e instanceof Df?dl(s,"updateDoc",t.S_,e,n,r):pl(s,"updateDoc",t.S_,e)).F_(t.S_,Jo.exists(!0))])}function bp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Kr&&(t=t._);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||up(i[u])||(s=i[u],u++);var a,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(up(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof Hf)c=qf(t.firestore,ql),h=vo(t.S_.path),a={next:function(e){i[u]&&i[u](wp(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=qf(t,Kf);c=qf(p.firestore,ql),h=p.C_;var d=new yp(c);a={next:function(t){i[u]&&i[u](new pp(c,d,p,t))},error:i[u+1],complete:i[u+2]},Xl(t.C_)}return function(t,e,n,r){var i=this,o=new kf(r),s=new qh(e,o,n);return t.fs.ys(function(){return Object(Ar.b)(i,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return e=Lh,[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.r_(),t.fs.ys(function(){return Object(Ar.b)(i,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return e=Rh,[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Fl(c),h,f,a)}function mp(t,e){return function(t,e){var n=this,r=new Eu;return t.fs.ys(function(){return Object(Ar.b)(n,void 0,void 0,function(){var n;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return n=$h,[4,Ll(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Fl(t),e)}function wp(t,e,n){var r=n.docs.get(e.S_),i=new yp(t);return new fp(t,i,e.S_,r,new hp(n.hasPendingWrites,n.fromCache),e.v_)}var Ip=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=ol(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=Ep(t,this.zf),i=ap(r.v_,e,n),o=sl(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Jo.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=Ep(t,this.zf);return e instanceof Kr&&(e=e._),o="string"==typeof e||e instanceof Df?dl(this.wd,"WriteBatch.update",s.S_,e,n,r):pl(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Jo.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=Ep(t,this.zf);return this.fd=this.fd.concat(new hs(e.S_,Jo.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Br(Gr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ep(t,e){if(t instanceof Kr&&(t=t._),t.firestore!==e)throw new Br(Gr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var _p=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(Ar.d)(e,t),e.prototype.get=function(e){var n=this,r=Ep(e,this.zf),i=new yp(this.zf);return t.prototype.get.call(this,e).then(function(t){return new fp(n.zf,i,r.S_,t.Jf,new hp(!1,!1),r.v_)})},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=ol(t)}return t.prototype.get=function(t){var e=this,n=Ep(t,this.zf),r=new cp(this.zf);return this.Td.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Pr();var i=t[0];if(i instanceof Bi)return new Kl(e.zf,r,n.S_,null,n.v_);if(i instanceof Gi)return new Kl(e.zf,r,i.key,i,n.v_);throw Pr()})},t.prototype.set=function(t,e,n){var r=Ep(t,this.zf),i=ap(r.v_,e,n),o=sl(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ep(t,this.zf);return e instanceof Kr&&(e=e._),o="string"==typeof e||e instanceof Df?dl(this.wd,"Transaction.update",s.S_,e,n,r):pl(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=Ep(t,this.zf);return this.Td.delete(e.S_),this},t}()),Op=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Bl(t=qf(t,ql));var n=Fl(t),r=t.p_(),i=new xf;return Gl(n,i,new Sf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Bl(t=qf(t,ql));var e=Fl(t),n=t.p_(),r=new xf;return Gl(e,r,new Nf(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Br(Gr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Eu;return t.Mf.Tf(function(){return Object(Ar.b)(e,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Ar.b)(this,void 0,void 0,function(){return Object(Ar.e)(this,function(e){switch(e.label){case 0:return Tu.Wn()?[4,Tu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(sc(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._)},t}(),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Qr||(i.md=e),i}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=qf(t,Bf)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Dr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue(function(){return Object(Ar.b)(e,void 0,void 0,function(){var e,n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return[4,Dl(t)];case 1:return e=r.sent(),[4,Pl(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=Rr(t);return e.Fh.delete(0),ah(e)}(n))]}})})})}(Fl(qf(this._,ql)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue(function(){return Object(Ar.b)(e,void 0,void 0,function(){var e,n;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return[4,Dl(t)];case 1:return e=r.sent(),[4,Pl(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return Object(Ar.b)(this,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return(e=Rr(t)).Fh.add(0),[4,ch(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}})})}(n))]}})})})}(Fl(qf(this._,ql)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Rf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Eu;return t.fs.ys(function(){return Object(Ar.b)(e,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(r){switch(r.label){case 0:return e=of,[4,Ll(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Fl(qf(this._,ql)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new kf(e);return t.fs.ys(function(){return Object(Ar.b)(n,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){Rr(t).jh.add(e),e.next()},[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.r_(),t.fs.ys(function(){return Object(Ar.b)(n,void 0,void 0,function(){var e;return Object(Ar.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){Rr(t).jh.delete(e)},[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Fl(t=qf(t,ql)),up(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Br(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Mp(this,Jf(this._,t))}catch(t){throw kp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new xp(this,Xf(this._,t))}catch(t){throw kp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Rp(this,function(t,e){if(t=qf(t,Bf),Pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Br(Gr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kf(t,null,function(t){return new lo(ai.at(),t)}(e))}(this._,t))}catch(t){throw kp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Eu;return t.fs.ys(function(){return Object(Ar.b)(n,void 0,void 0,function(){var n;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return[4,function(t){return kl(t).then(function(t){return t.Dh})}(t)];case 1:return n=i.sent(),new jl(t.fs,n,e,r).run(),[2]}})})}),r.promise}(Fl(t),function(n){return e(new _p(t,n))})}(this._,function(n){return t(new Ap(e,n))})},e.prototype.batch=function(){var t=this;return Fl(this._),new Sp(new Ip(this._,function(e){return mp(t._,e)}))},e.prototype.loadBundle=function(t){throw new Br(Gr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Br(Gr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Kr),jp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ar.d)(e,t),e.prototype.Uf=function(t){return new Xr(new Hr(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return xp.Ad(e,this.firestore,null)},e}(Hl),Ap=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new jp(e),r}return Object(Ar.d)(e,t),e.prototype.get=function(t){var e=this,n=qp(t);return this._.get(n).then(function(t){return new Pp(e.zf,new fp(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=qp(t);return n?(Lf("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=qp(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(Ar.i)([s,e,n],i)),this},e.prototype.delete=function(t){var e=qp(t);return this._.delete(e),this},e}(Kr),Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.set=function(t,e,n){var r=qp(t);return n?(Lf("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=qp(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(Ar.i)([s,e,n],i)),this},e.prototype.delete=function(t){var e=qp(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Kr),Np=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).zf=e,i.Hf=n,i}return Object(Ar.d)(e,t),e.prototype.fromFirestore=function(t,e){var n=new lp(this.zf._,this.Hf,t.S_,t.Jf,t.metadata,null);return this._.fromFirestore(new Lp(this.zf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._.toFirestore(t,e):this._.toFirestore(t)},e.Rd=function(t,n){var r=e.Pd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new jp(t),n),i.set(n,o)),o},e}(Kr);Np.Pd=new WeakMap;var xp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new jp(e),r}return Object(Ar.d)(e,t),e.yd=function(t,n,r){if(t.length%2!=0)throw new Br(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Hf(n._,r,new fi(t)))},e.Ad=function(t,n,r){return new e(n,new Hf(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Mp(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Mp(this.firestore,Jf(this._,t))}catch(t){throw kp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Kr&&(t=t._),t instanceof Hf&&Yf(this._,t)},e.prototype.set=function(t,e){e=Lf("DocumentReference.set",e);try{return function(t,e,n){t=qf(t,Hf);var r=qf(t.firestore,ql),i=ap(t.v_,e,n);return mp(r,[sl(ol(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Jo.Wt())])}(this._,t,e)}catch(t){throw kp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?gp(this._,t):gp.apply(void 0,Object(Ar.i)([this._,t,e],n))}catch(t){throw kp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return mp(qf((t=this._).firestore,ql),[new hs(t.S_,Jo.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=Cp(e,function(e){return new Pp(t.firestore,new fp(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))});return bp(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qf(t,Hf);var e=qf(t.firestore,ql),n=Fl(e),r=new yp(e);return function(t,e){var n=this,r=new Eu;return t.fs.ys(function(){return Object(Ar.b)(n,void 0,void 0,function(){var n;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i;return Object(Ar.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Rr(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Ic.Jo(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Gi?n.resolve(i):i instanceof Bi?n.resolve(null):n.reject(new Br(Gr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Pu(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Cl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new fp(e,r,t.S_,n,new hp(n instanceof Gi&&n.bt,!0),t.v_)})}(this._):"server"===(null==t?void 0:t.source)?function(t){t=qf(t,Hf);var e=qf(t.firestore,ql);return Vl(Fl(e),t.S_,{source:"server"}).then(function(n){return wp(e,t,n)})}(this._):function(t){t=qf(t,Hf);var e=qf(t.firestore,ql);return Vl(Fl(e),t.S_).then(function(n){return wp(e,t,n)})}(this._)).then(function(t){return new Pp(e.firestore,new fp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(Np.Rd(this.firestore,t)))},e}(Kr);function kp(t,e,n){return t.message=t.message.replace(e,n),t}function Dp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!up(r))return r}return{}}function Cp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=up(t[0])?t[0]:up(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new xp(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return vp(this._,t._)},e}(Kr),Lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(Pp),Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new jp(e),r}return Object(Ar.d)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ql(this._,function(t,e,n){var r=e,i=Jl("where",t);return new $l(i,r,n)}(t,n,r)))}catch(t){throw kp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ql(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Jl("orderBy",t);return new Zl(r,n)}(t,n)))}catch(t){throw kp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ql(this._,function(t){return Ff("limit",t),new tp("limit",t,"F")}(t)))}catch(t){throw kp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ql(this._,function(t){return Ff("limitToLast",t),new tp("limitToLast",t,"L")}(t)))}catch(t){throw kp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ql(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ep("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw kp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ql(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ep("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw kp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ql(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw kp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ql(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw kp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Qf(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qf(t,Kf);var e=qf(t.firestore,ql),n=Fl(e),r=new yp(e);return function(t,e){var n=this,r=new Eu;return t.fs.ys(function(){return Object(Ar.b)(n,void 0,void 0,function(){var n;return Object(Ar.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ar.b)(this,void 0,void 0,function(){var r,i,o,s,u;return Object(Ar.e)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Ic(t,e,!0)];case 1:return u=a.sent(),r=new Hh(e,u.Pc),i=r.dl(u.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Pu(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}})})},[4,Cl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new pp(e,r,t,n)})}(this._):"server"===(null==t?void 0:t.source)?function(t){t=qf(t,Kf);var e=qf(t.firestore,ql),n=Fl(e),r=new yp(e);return Ul(n,t.C_,{source:"server"}).then(function(n){return new pp(e,r,t,n)})}(this._):function(t){t=qf(t,Kf);var e=qf(t.firestore,ql),n=Fl(e),r=new yp(e);return Xl(t.C_),Ul(n,t.C_).then(function(n){return new pp(e,r,t,n)})}(this._)).then(function(t){return new Up(e.firestore,new pp(e.firestore._,e.Hf,e._,t.ud))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=Cp(e,function(e){return new Up(t.firestore,new pp(t.firestore._,t.Hf,t._,e.ud))});return bp(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(Np.Rd(this.firestore,t)))},e}(Kr),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Lp(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Kr),Up=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Rp(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map(function(e){return new Lp(t.zf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map(function(t){return new Vp(e.zf,t)})},e.prototype.forEach=function(t,e){var n=this;this._.forEach(function(r){t.call(e,new Lp(n.zf,r))})},e.prototype.isEqual=function(t){return vp(this._,t._)},e}(Kr),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(Ar.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new xp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new xp(this.firestore,void 0===t?Xf(this._):Xf(this._,t))}catch(t){throw kp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=qf(t.firestore,ql),r=Xf(t),i=ap(t.v_,e);return mp(n,[sl(ol(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Jo.exists(!1))]).then(function(){return r})}(this._,t).then(function(t){return new xp(e.firestore,t)})},e.prototype.isEqual=function(t){return Yf(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(Np.Rd(this.firestore,t)))},e}(Rp);function qp(t){return t instanceof Kr&&(t=t._),qf(t,Hf)}var Fp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Df.bind.apply(Df,Object(Ar.i)([void 0],e))))||this}return Object(Ar.d)(e,t),e.documentId=function(){return new e(hi.lt().ot())},e.prototype.isEqual=function(t){return t instanceof Kr&&(t=t._),t instanceof Df&&this._.d_.isEqual(t.d_)},e}(Kr),zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ar.d)(e,t),e.serverTimestamp=function(){var t=new cl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ul("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hl("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fl("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new ll("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Kr);!function(){function t(){this.gd={},this.Vd=new Eu,this.pd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.gd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Vd.promise.catch(t)},t.prototype.then=function(t,e){return this.Vd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.gd.complete&&this.gd.complete(),this.Vd.resolve(t)},t.prototype.Wl=function(t){this.pd.taskState="Error",this.gd.next&&this.gd.next(this.pd),this.gd.error&&this.gd.error(t),this.Vd.reject(t)},t.prototype.Ql=function(t){this.pd=t,this.gd.next&&this.gd.next(t)}}();var Gp,Bp=n("/6Yf"),Hp={Firestore:Tp,GeoPoint:$f,Timestamp:oi,Blob:Xr,Transaction:Ap,WriteBatch:Sp,DocumentReference:xp,DocumentSnapshot:Pp,Query:Rp,QueryDocumentSnapshot:Lp,QuerySnapshot:Up,CollectionReference:Mp,FieldPath:Fp,FieldValue:zp,setLogLevel:function(t){Sr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Bp.a("firestore",function(t){return function(t,e){return new Tp(t,new ql(t,e),new Op)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Hp)))})(Gp=E.a),Gp.registerVersion("@firebase/firestore","2.1.3");var Kp=n("UbJi");function Wp(t,e){return function(t,e=i.b){return new o.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Jp(t,e){return Wp(t,e).pipe(Object(p.a)(t=>({payload:t,type:"query"})))}function Xp(t,e){return Jp(t,e).pipe(Object(a.a)(void 0),h(),Object(p.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Yp(t,e,n){return Xp(t,n).pipe(Object(d.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qp(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Qp(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qp(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new v(void 0,void 0)),Object(p.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Qp(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function $p(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Zp{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Xp(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(p.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Object(a.a)(void 0),h(),Object(g.a)(([t,e])=>e.length>0||!t),Object(p.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(d.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=$p(t);return Yp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(p.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(s.a)(this.query.get(t)).pipe(Object(b.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new td(this.ref.doc(t),this.afs)}}class td{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=sd(n,e);return new Zp(r,i,this.afs)}snapshotChanges(){return Wp(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(a.a)(void 0),h(),Object(p.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(p.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(s.a)(this.ref.get(t)).pipe(Object(b.b)(this.afs.schedulers.insideAngular))}}class ed{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Xp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(p.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(g.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Xp(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(d.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=$p(t);return Yp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(p.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(s.a)(this.query.get(t)).pipe(Object(b.b)(this.afs.schedulers.insideAngular))}}const nd=new r.q("angularfire2.enableFirestorePersistence"),rd=new r.q("angularfire2.firestore.persistenceSettings"),id=new r.q("angularfire2.firestore.settings"),od=new r.q("angularfire2.firestore.use-emulator");function sd(t,e=(t=>t)){return{query:e(t),ref:t}}let ud=(()=>{class t{constructor(t,e,n,r,i,o,a,c,h){this.schedulers=new m.d(o),this.keepUnstableUntilFirst=Object(m.h)(this.schedulers);const f=Object(m.g)(t,o,e);!I.a.auth&&h&&Object(m.j)();const l=c;[this.firestore,this.persistenceEnabled$]=Object(m.f)(f.name+".firestore","AngularFirestore",f,()=>{const t=o.runOutsideAngular(()=>f.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!Object(w.t)(i)){const e=()=>{try{return Object(s.a)(t.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(Gp){return"undefined"!=typeof console&&console.warn(Gp),Object(u.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(u.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=sd(n,e),o=this.schedulers.ngZone.run(()=>r);return new Zp(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new ed(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new td(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(m.c),r.Wb(m.b,8),r.Wb(nd,8),r.Wb(id,8),r.Wb(r.B),r.Wb(r.z),r.Wb(rd,8),r.Wb(od,8),r.Wb(Kp.c,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Wb)(m.c),Object(r.Wb)(m.b,8),Object(r.Wb)(nd,8),Object(r.Wb)(id,8),Object(r.Wb)(r.B),Object(r.Wb)(r.z),Object(r.Wb)(rd,8),Object(r.Wb)(od,8),Object(r.Wb)(Kp.c,8))},token:t,providedIn:"any"}),t})(),ad=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:nd,useValue:!0},{provide:rd,useValue:e}]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[ud]}),t})()},UbJi:function(t,e,n){"use strict";n.d(e,"a",function(){return T}),n.d(e,"b",function(){return j}),n.d(e,"c",function(){return m});var r=n("fXoL"),i=n("XNiG"),o=n("LRne"),s=n("HDdC"),u=n("Cfvw"),a=n("VRyK"),c=n("pxpQ"),h=n("eIep"),f=n("lJxs"),l=n("UXun"),p=n("SxV6");function d(t,e){return e?Object(h.a)(()=>t,e):Object(h.a)(()=>t)}var v=n("tf+s"),y=n("pLZG"),g=n("spgP"),b=n("ofXK");const m=new r.q("angularfire2.auth.use-emulator"),w=new r.q("angularfire2.auth.settings"),I=new r.q("angularfire2.auth.tenant-id"),E=new r.q("angularfire2.auth.langugage-code"),_=new r.q("angularfire2.auth.use-device-language"),O=new r.q("angularfire.auth.persistence");let T=(()=>{class t{constructor(t,e,r,m,w,I,E,_,O,T){const j=new g.d(m),A=Object(g.h)(j),S=new i.a,N=Object(o.a)(void 0).pipe(Object(c.b)(j.outsideAngular),Object(h.a)(()=>m.runOutsideAngular(()=>n.e(10).then(n.bind(null,"6nsN")))),Object(f.a)(()=>Object(g.g)(t,m,e)),Object(f.a)(t=>m.runOutsideAngular(()=>{const e=w,n=I;return Object(g.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=m.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),E&&(r.tenantId=E),r.languageCode=_,O&&r.useDeviceLanguage(),n&&(r.settings=n),T&&r.setPersistence(T),r},[e,E,_,O,n,T])})),Object(l.a)({bufferSize:1,refCount:!1}));if(Object(b.t)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(o.a)(null);else{N.pipe(Object(p.a)()).subscribe();const t=N.pipe(Object(h.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),A,Object(l.a)({bufferSize:1,refCount:!1})),e=t=>new s.a(e=>({unsubscribe:m.runOutsideAngular(()=>t(e))})),n=N.pipe(Object(h.a)(t=>e(t.onAuthStateChanged.bind(t)))),r=N.pipe(Object(h.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(d(n),Object(v.a)(j.outsideAngular),Object(c.b)(j.insideAngular)),this.user=t.pipe(d(r),Object(v.a)(j.outsideAngular),Object(c.b)(j.insideAngular)),this.idToken=this.user.pipe(Object(h.a)(t=>t?Object(u.a)(t.getIdToken()):Object(o.a)(null))),this.idTokenResult=this.user.pipe(Object(h.a)(t=>t?Object(u.a)(t.getIdTokenResult()):Object(o.a)(null))),this.credential=Object(a.a)(t,S,this.authState.pipe(Object(y.a)(t=>!t))).pipe(Object(f.a)(t=>(null==t?void 0:t.user)?t:null),Object(v.a)(j.outsideAngular),Object(c.b)(j.insideAngular))}return Object(g.i)(this,N,m,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>S.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(g.c),r.Wb(g.b,8),r.Wb(r.B),r.Wb(r.z),r.Wb(m,8),r.Wb(w,8),r.Wb(I,8),r.Wb(E,8),r.Wb(_,8),r.Wb(O,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Wb)(g.c),Object(r.Wb)(g.b,8),Object(r.Wb)(r.B),Object(r.Wb)(r.z),Object(r.Wb)(m,8),Object(r.Wb)(w,8),Object(r.Wb)(I,8),Object(r.Wb)(E,8),Object(r.Wb)(_,8),Object(r.Wb)(O,8))},token:t,providedIn:"any"}),t})();Object(g.e)(T,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let j=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[T]}),t})()},"kR/R":function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n("mrSG"),i=n("LRne"),o=n("lJxs"),s=n("eIep"),u=n("IzEk"),a=n("fXoL"),c=n("UbJi"),h=n("I/3d"),f=n("+OBp"),l=n("tyNb"),p=n("7g+E");let d=(()=>{class t{constructor(t,e,n,r,a){this.firebaseAuthentication=t,this.firestore=e,this.commonService=n,this.router=r,this.spinner=a,this.user$=t.authState,this.isLoggedIn$=t.authState.pipe(Object(o.a)(t=>!!t)),this.appUser$=t.authState.pipe(Object(s.a)(t=>t?this.firestore.doc("users/"+t.uid).valueChanges().pipe(Object(u.a)(1)):Object(i.a)(null)))}login(t,e){return Object(r.a)(this,void 0,void 0,function*(){return!!(yield this.firebaseAuthentication.signInWithEmailAndPassword(t,e).catch(t=>{this.errorHandler(t)}))&&(this.appUser$.pipe(Object(u.a)(1)).subscribe(t=>{this.redirectLoggedInTo(t.default_role),this.commonService.snackbarClear()}),!0)})}logout(){this.firebaseAuthentication.signOut().then(()=>this.router.navigate(["/"]))}errorHandler(t){let e="Unknown Error occured";switch(t.code){case"auth/invalid-email":e="Invalid E-mail and password combination. Try Again";break;case"auth/user-disabled":e="Your account has been <strong>disabled</strong> due to many unsuccessful log in attempts<br>Try again after sometime or contact administrator";break;case"auth/user-not-found":case"auth/wrong-password":e="Invalid E-mail and password combination. Try Again";break;case"auth/email-already-in-use":e="This email address is already in use by another account";break;case"auth/invalid-email":e="Your email address seems invalid. Check your E-mail address and try again";break;case"auth/operation-not-allowed":e="Authentication is currently disabled by admin. Contact your admin";break;case"auth/weak-password":e="Entered password is weak. Enter a different password and then try again";break;default:e=t.message}this.commonService.snackbarError(e,3e4)}redirectLoggedInTo(t){return Object(r.a)(this,void 0,void 0,function*(){switch(t){case"LEARNER":this.router.navigate(["/learner"]).then(console.log);break;case"INSTRUCTOR":this.router.navigate(["/instructor"]);break;default:this.logout()}})}sendForgetPasswordLink(t,e){this.firebaseAuthentication.sendPasswordResetEmail(t,e).then(()=>{this.commonService.snackbarSuccess("A password reset link has been sent to your email \n        <br>Check your email to reset the password ",3e4)})}registerNewUser(t,e,n,i){return Object(r.a)(this,void 0,void 0,function*(){yield this.firebaseAuthentication.createUserWithEmailAndPassword(e,n).then(t=>{var e,n,r;t&&this.firestore.doc("users/"+(null===(e=t.user)||void 0===e?void 0:e.uid)).set({default_role:i,email:null===(n=t.user)||void 0===n?void 0:n.email,uid:null===(r=t.user)||void 0===r?void 0:r.uid}).then(()=>{this.commonService.snackbarSuccess("Registration Successfull",3e4),this.redirectLoggedInTo(i)})}).catch(t=>{this.errorHandler(t)})})}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(c.a),a.Wb(h.a),a.Wb(f.a),a.Wb(l.f),a.Wb(p.c))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);